(function(b){function f(a,d){return fetch(a).then(function(a){console.log("Pos 1");if(200!==a.status)throw Error("Response failed with code "+a.status);console.log("Pos 2");console.log(a);console.log("Pos 2a");var t=!1,b=new ReadableStream({start:function(b){function c(){if(!t)return console.log("Pos 4"),e.read().then(function(a){t=a.done;a=a.value;t?(console.log("Done"),(a=d.End())?b.enqueue(a):b.close()):(a=d.GetNextChunk(a),console.log("Enqueue"),a&&b.enqueue(a))}).then(c)}console.log("Pos 3");
var g=a.body;console.log("Pos 3z"+g);var e=g.getReader();c()}});console.log("Pos 2b");return new Response(b,{headers:{"content-type":"application/wasm"}})})}var h=function(a){if("string"===typeof a){for(var d=new Uint8Array(a.length),b=a.length,c=0;c<b;c++)d[c]=a.charCodeAt(c);return d}return a},g=function(a){if("string"!==typeof a){for(var d="",b=0,c=a.length,g;b<c;)g=a.subarray(b,b+1024),b+=1024,d+=String.fromCharCode.apply(null,g);return d}return a},a=!1,d=function(d,c){a||(importScripts(b.basePath+
"external/decode.min.js"),a=!0);var e=self.BrotliDecode(h(d));return c?e:g(e)},c=function(){this.remainingDataArrays=[]};c.prototype={processRaw:function(a){return a},processBrotli:function(a){this.remainingDataArrays.push(a);return null},GetNextChunk:function(a){this.decodeFunction||(this.decodeFunction=0===a[0]&&97===a[1]&&115===a[2]&&109===a[3]?this.processRaw:this.processBrotli);return this.decodeFunction(a)},End:function(){if(this.remainingDataArrays.length){for(var a=this.arrays,b=0,c=0;c<a.length;++c)b+=
a[c].length;for(var b=new Uint8Array(b),g=0,c=0;c<a.length;++c){var e=a[c];b.set(e,g);g+=e.length}return d(b,!0)}return null}};var e=!1,k=function(a,d){e||(importScripts(b.basePath+"external/rawinflate.js",b.basePath+"external/pako_inflate.min.js"),e=!0);var c=10;if("string"===typeof a){if(a.charCodeAt(3)&8){for(;0!==a.charCodeAt(c);++c);++c}}else if(a[3]&8){for(;0!==a[c];++c);++c}if(d)return a=h(a),a=a.subarray(c,a.length-8),b.pako.inflate(a,{windowBits:-15});a=g(a);a=a.substring(c,a.length-8);return b.RawDeflate.inflate(a)},
q=function(a,b){return b?a:g(a)},l=function(a){var b=!a.shouldOutputArray,d=new XMLHttpRequest;d.open("GET",a.url,a.isAsync);var c=b&&d.overrideMimeType;d.responseType=c?"text":"arraybuffer";c&&d.overrideMimeType("text/plain; charset=x-user-defined");d.send();var e=function(){Date.now();var e;e=c?d.responseText:new Uint8Array(d.response);e.length<a.compressedMaximum?(e=a.decompressFunction(e,a.shouldOutputArray),console.warn("Your server has not been configured to serve .gz and .br files with the expected Content-Encoding. See http://www.pdftron.com/kb_content_encoding for instructions on how to resolve this.")):
b&&(e=g(e));return e},f;if(a.isAsync)f=new Promise(function(b,c){d.onload=function(){200===this.status?b(e()):c("Download Failed "+a.url)};d.onerror=function(){c("Network error occurred "+a.url)}});else{if(200===d.status)return e();throw Error("Failed to load "+a.url);}return f},m=function(a){return a.replace(".",".br.")},r=function(a,d){d.url=a.replace(".",".gz.");d.decompressFunction=k;return l(d)},n=function(a,b){b.url=m(a);b.decompressFunction=d;return l(b)},p=function(a,d){d.url=a;d.decompressFunction=
q;return l(d)},v=function(a,d,b,c){return a["catch"](function(a){console.warn(a);return c(d,b)})},u=function(a,d,b){var c;if(b.isAsync){var e=d[0](a,b);for(c=1;c<d.length;++c)e=v(e,a,b,d[c]);return e}for(c=0;c<d.length;++c)try{return d[c](a,b)}catch(g){console.warn(g.message)}};b.getBrotliUrl=m;b.loadURLWithBrotliPriority=function(a,d,b,c){var e={};e.compressedMaximum=d;e.isAsync=b;e.shouldOutputArray=c;return u(a,[n,r,p],e)};b.loadURLWithGzipPriority=function(a,d,b,c){var e={};e.compressedMaximum=
d;e.isAsync=b;e.shouldOutputArray=c;return u(a,[r,n,p],e)};b.loadWasmBrotliStream=function(a){return f(a,new c)}})("undefined"===typeof window?this:window);(function(b){var f=b._trnDebugMode,h=b._logFiltersEnabled?b._logFiltersEnabled:{};b.utils=b.utils?b.utils:{};b.utils.warn=function(b,a){a||(a=b,b="default");f&&h[b]&&console.warn(b+": "+a)};b.utils.log=function(b,a){a||(a=b,b="default");f&&h[b]&&console.log(b+": "+a)};b.utils.error=function(b){f&&console.error(b);throw Error(b);};b.info=function(b,a){};b.warn=function(f,a){b.utils.warn(f,a)};b.error=function(f){b.utils.error(f)}})("undefined"===typeof window?this:window);(function(b){function f(b){return new Promise(function(a,d){var c=indexedDB.open("wasm-cache",b);c.onerror=d.bind(null,"Error opening wasm cache database");c.onsuccess=function(){a(c.result)};c.onupgradeneeded=function(a){var b=c.result;b.objectStoreNames.contains("wasm-cache")&&(console.log("Clearing out version "+a.oldVersion+" wasm cache"),b.deleteObjectStore("wasm-cache"));console.log("Creating version "+a.newVersion+" wasm cache");b.createObjectStore("wasm-cache")}})}function h(b,a){return new Promise(function(d,
c){var e=b.transaction(["wasm-cache"]).objectStore("wasm-cache").get(a);e.onsuccess=function(b){e.result?d(e.result):c("Module "+a+" was not found in wasm cache")};e.onerror=c.bind(null,"Error getting wasm module "+a)})}b.isWasmCached=function(b,a){return f(b).then(function(b){return h(b,a).then(function(){return!0})})["catch"](function(){return!1})};b.instantiateCachedURL=function(g,a,d,c){function e(b,d){var c=b.transaction(["wasm-cache"],"readwrite").objectStore("wasm-cache").put(d,a);c.onerror=
function(a){console.log("Failed to store in wasm cache: "+a)};c.onsuccess=function(b){console.log("Successfully stored "+a+" in wasm cache")}}function k(e){q=q||Date.now();return e?WebAssembly.instantiateStreaming(fetch(b.getBrotliUrl(a)),d)["catch"](function(a){return k(!1)}):b.loadURLWithBrotliPriority(a,c,!0,!0).then(function(a){Date.now();return WebAssembly.instantiate(a,d)})}var q;return f(g).then(function(b){return h(b,a).then(function(a){return WebAssembly.instantiate(a,d)},function(a){return k(!!WebAssembly.instantiateStreaming).then(function(a){try{e(b,
a.module)}catch(d){}return a.instance})})},function(a){console.log(a);return k().then(function(a){return a.instance})})}})(this);(function(b){b.Uint8ClampedArray||(b.Uint8ClampedArray=b.Uint8Array);var f=!(!self.WebAssembly||!self.WebAssembly.validate),h=/^((?!chrome|android).)*safari/i.test(b.navigator.userAgent),g=-1<b.navigator.userAgent.indexOf("Edge"),a=function(a){var b=this;this.promise=a.then(function(a){b.response=a;b.status=200})};a.prototype={addEventListener:function(a,b){this.promise.then(b)}};b.loadCompiledBackend=function(d,c,e){if(!f||e||g||h){e=loadURLWithGzipPriority((Module.asmjsPrefix?Module.asmjsPrefix:
"")+d+".js",c[".js"],!1);var k=loadURLWithGzipPriority((Module.memoryInitializerPrefixURL?Module.memoryInitializerPrefixURL:"")+d+".js.mem",c[".js.mem"],!0,!0);Module.memoryInitializerRequest=new a(k)}else Module.instantiateWasm=function(a,e){return self.instantiateCachedURL(b.getWasmVersion(d),d+"Wasm.wasm",a,c["Wasm.wasm"]).then(function(a){e(a)})},e=loadURLWithBrotliPriority(d+"Wasm.js",c["Wasm.js"],!1,!1);eval.call(self,e)}})("undefined"===typeof window?this:window);var createPromiseCapability=function(){var b={};b.promise=new Promise(function(f,h){b.resolve=f;b.reject=h});return b};("undefined"===typeof window?this:window).createPromiseCapability=createPromiseCapability;
(function(b){function f(a){this._status=0;this._handlers=[];try{a.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(b){this._reject(b)}}if(b.Promise)"function"!==typeof b.Promise.all&&(b.Promise.all=function(a){var d=0,c=[],e,f,h=new b.Promise(function(a,b){e=a;f=b});a.forEach(function(a,b){d++;a.then(function(a){c[b]=a;d--;0===d&&e(c)},f)});0===d&&e(c);return h}),"function"!==typeof b.Promise.resolve&&(b.Promise.resolve=function(a){return new b.Promise(function(b){b(a)})}),"function"!==
typeof b.Promise.reject&&(b.Promise.reject=function(a){return new b.Promise(function(b,c){c(a)})}),"function"!==typeof b.Promise.prototype["catch"]&&(b.Promise.prototype["catch"]=function(a){return b.Promise.prototype.then(void 0,a)});else{var h="function"===typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},g={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(a){0!==a._status&&(this.handlers=this.handlers.concat(a._handlers),a._handlers=
[],this.running||(this.running=!0,h(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var a=Date.now()+1;0<this.handlers.length;){var b=this.handlers.shift(),c=b.thisPromise._status,e=b.thisPromise._value;try{1===c?"function"===typeof b.onResolve&&(e=b.onResolve(e)):"function"===typeof b.onReject&&(e=b.onReject(e),c=1,b.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(b.thisPromise))}catch(f){c=2,e=f}b.nextPromise._updateStatus(c,e);if(Date.now()>=a)break}0<this.handlers.length?
h(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(a){this.unhandledRejections.push({promise:a,time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var b=0;b<this.unhandledRejections.length;b++)this.unhandledRejections[b].promise===a&&(this.unhandledRejections.splice(b),b--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=
!1;for(var a=Date.now(),b=0;b<this.unhandledRejections.length;b++)if(500<a-this.unhandledRejections[b].time){var c=this.unhandledRejections[b].promise._value,e="Unhandled rejection: "+c;c.stack&&(e+="\n"+c.stack);warn(e);this.unhandledRejections.splice(b);b--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};f.all=function(a){function b(a){2!==h._status&&(l=[],e(a))}var c,e,h=new f(function(a,b){c=a;e=b}),g=a.length,l=[];if(0===g)return c(l),h;for(var m=0,r=a.length;m<
r;++m){var n=a[m],p=function(a){return function(b){2!==h._status&&(l[a]=b,g--,0===g&&c(l))}}(m);f.isPromise(n)?n.then(p,b):p(n)}return h};f.isPromise=function(a){return a&&"function"===typeof a.then};f.resolve=function(a){return new f(function(b){b(a)})};f.reject=function(a){return new f(function(b,c){c(a)})};f.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(a,b){1!==this._status&&2!==this._status&&(1===a&&f.isPromise(b)?b.then(this._updateStatus.bind(this,
1),this._updateStatus.bind(this,2)):(this._status=a,this._value=b,2===a&&0===this._handlers.length&&(this._unhandledRejection=!0,g.addUnhandledRejection(this)),g.scheduleHandlers(this)))},_resolve:function(a){this._updateStatus(1,a)},_reject:function(a){this._updateStatus(2,a)},then:function(a,b){var c=new f(function(a,b){this.resolve=a;this.reject=b});this._handlers.push({thisPromise:this,onResolve:a,onReject:b,nextPromise:c});g.scheduleHandlers(this);return c},"catch":function(a){return this.then(void 0,
a)}};b.Promise=f}})("undefined"===typeof window?this:window);(function(b){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(b,h){void 0===b&&(b=0);void 0===h&&(h=this.byteLength);b=Math.floor(b);h=Math.floor(h);0>b&&(b+=this.byteLength);0>h&&(h+=this.byteLength);b=Math.min(Math.max(0,b),this.byteLength);h=Math.min(Math.max(0,h),this.byteLength);if(0>=h-b)return new ArrayBuffer(0);var g=new ArrayBuffer(h-b),a=new Uint8Array(g),d=new Uint8Array(this,b,h-b);a.set(d);return g})})(this);var tikTokStart=null;
(function(b){function f(a){a=g(a);d(a.msg)}function h(){k=function(){}}function g(a){var b=[];return{resource_array:b,msg:JSON.stringify(a.data,function(a,d){if("object"===typeof d){var f=null;d instanceof Uint8Array?f=d:d instanceof ArrayBuffer&&(f=new Uint8Array(d));if(f){var h=c(f.length),g=e(h);g&&(new Uint8Array(Module.HEAPU8.buffer,g,f.length)).set(f);b.push(h);return{__trn_res_id:h}}}return d})}}b.basePath="../";importScripts(b.basePath+"external/Promise.js");var a=[];onmessage=function(b){a||
(a=[]);a.push(b)};b.ContinueFunc=function(a){k("ContinueFunc called");setTimeout(function(){onmessage({data:{action:"continue"}})},a)};b.Module={onRuntimeInitialized:function(){console.log("on ready");k||h();var g=Date.now()-tikTokStart;b.utils.log("load","time duration from start to ready: "+JSON.stringify(g));d=Module.cwrap("TRN_OnMessage",null,["string"]);c=Module.cwrap("TRN_CreateBufferResource","number",["number"]);e=Module.cwrap("TRN_GetResourcePointer","number",["number"]);k("OnReady called");
onmessage=f;Module._TRN_InitWorker();for(g=0;g<a.length;++g)onmessage(a[g]);a=null},fetchSelf:function(){tikTokStart=Date.now();b.loadCompiledBackend("WebOfficeWorker",{"Wasm.wasm":5E6,"Wasm.js":1E5,".js":5E6,".js.mem":3E6},!0);console.log("end of fetch self")},noExitRuntime:!0};var d,c,e,k;b.Module.fetchSelf()})("undefined"===typeof window?this:window);
