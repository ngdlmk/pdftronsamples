(function(a){var h={PDFNetC:7,PDFNetCFull:7};a.getWasmVersion=function(c){return h[c]}})("undefined"===typeof window?this:window);(function(a){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,c){void 0===a&&(a=0);void 0===c&&(c=this.byteLength);a=Math.floor(a);c=Math.floor(c);0>a&&(a+=this.byteLength);0>c&&(c+=this.byteLength);a=Math.min(Math.max(0,a),this.byteLength);c=Math.min(Math.max(0,c),this.byteLength);if(0>=c-a)return new ArrayBuffer(0);var d=new ArrayBuffer(c-a),f=new Uint8Array(d),k=new Uint8Array(this,a,c-a);f.set(k);return d})})(this);var createPromiseCapability=function(){var a={};a.promise=new Promise(function(h,c){a.resolve=h;a.reject=c});return a};("undefined"===typeof window?this:window).createPromiseCapability=createPromiseCapability;
(function(a){function h(a){this._status=0;this._handlers=[];try{a.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(c){this._reject(c)}}if(a.Promise)"function"!==typeof a.Promise.all&&(a.Promise.all=function(c){var d=0,g=[],h,l,v=new a.Promise(function(a,c){h=a;l=c});c.forEach(function(a,c){d++;a.then(function(a){g[c]=a;d--;0===d&&h(g)},l)});0===d&&h(g);return v}),"function"!==typeof a.Promise.resolve&&(a.Promise.resolve=function(c){return new a.Promise(function(a){a(c)})}),"function"!==
typeof a.Promise.reject&&(a.Promise.reject=function(c){return new a.Promise(function(a,d){d(c)})}),"function"!==typeof a.Promise.prototype["catch"]&&(a.Promise.prototype["catch"]=function(c){return a.Promise.prototype.then(void 0,c)});else{var c="function"===typeof setImmediate&&setImmediate||function(c){setTimeout(c,1)},d={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(a){0!==a._status&&(this.handlers=this.handlers.concat(a._handlers),a._handlers=
[],this.running||(this.running=!0,c(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var a=Date.now()+1;0<this.handlers.length;){var d=this.handlers.shift(),g=d.thisPromise._status,h=d.thisPromise._value;try{1===g?"function"===typeof d.onResolve&&(h=d.onResolve(h)):"function"===typeof d.onReject&&(h=d.onReject(h),g=1,d.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(d.thisPromise))}catch(l){g=2,h=l}d.nextPromise._updateStatus(g,h);if(Date.now()>=a)break}0<this.handlers.length?
c(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(a){this.unhandledRejections.push({promise:a,time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var c=0;c<this.unhandledRejections.length;c++)this.unhandledRejections[c].promise===a&&(this.unhandledRejections.splice(c),c--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=
!1;for(var a=Date.now(),c=0;c<this.unhandledRejections.length;c++)if(500<a-this.unhandledRejections[c].time){var d=this.unhandledRejections[c].promise._value,h="Unhandled rejection: "+d;d.stack&&(h+="\n"+d.stack);warn(h);this.unhandledRejections.splice(c);c--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};h.all=function(c){function a(b){2!==l._status&&(n=[],q(b))}var d,q,l=new h(function(b,p){d=b;q=p}),v=c.length,n=[];if(0===v)return d(n),l;for(var t=0,m=c.length;t<
m;++t){var r=c[t],p=function(b){return function(p){2!==l._status&&(n[b]=p,v--,0===v&&d(n))}}(t);h.isPromise(r)?r.then(p,a):p(r)}return l};h.isPromise=function(c){return c&&"function"===typeof c.then};h.resolve=function(c){return new h(function(a){a(c)})};h.reject=function(c){return new h(function(a,d){d(c)})};h.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(c,a){1!==this._status&&2!==this._status&&(1===c&&h.isPromise(a)?a.then(this._updateStatus.bind(this,
1),this._updateStatus.bind(this,2)):(this._status=c,this._value=a,2===c&&0===this._handlers.length&&(this._unhandledRejection=!0,d.addUnhandledRejection(this)),d.scheduleHandlers(this)))},_resolve:function(c){this._updateStatus(1,c)},_reject:function(c){this._updateStatus(2,c)},then:function(c,a){var g=new h(function(c,a){this.resolve=c;this.reject=a});this._handlers.push({thisPromise:this,onResolve:c,onReject:a,nextPromise:g});d.scheduleHandlers(this);return g},"catch":function(c){return this.then(void 0,
c)}};a.Promise=h}})("undefined"===typeof window?this:window);(function(a,h){function c(b){"function"!==typeof b&&(b=new Function(""+b));for(var u=Array(arguments.length-1),c=0;c<u.length;c++)u[c]=arguments[c+1];t[n]={callback:b,args:u};p(n);return n++}function d(b){delete t[b]}function f(b){if(m)setTimeout(f,0,b);else{var p=t[b];if(p){m=!0;try{var c=p.callback,a=p.args;switch(a.length){case 0:c();break;case 1:c(a[0]);break;case 2:c(a[0],a[1]);break;case 3:c(a[0],a[1],a[2]);break;default:c.apply(h,a)}}finally{d(b),m=!1}}}}function k(){p=function(b){process.nextTick(function(){f(b)})}}
function g(){if(a.postMessage&&!a.importScripts){var b=!0,p=a.onmessage;a.onmessage=function(){b=!1};a.postMessage("","*");a.onmessage=p;return b}}function q(){var b="setImmediate$"+Math.random()+"$",c=function(p){p.source===a&&"string"===typeof p.data&&0===p.data.indexOf(b)&&f(+p.data.slice(b.length))};a.addEventListener?a.addEventListener("message",c,!1):a.attachEvent("onmessage",c);p=function(p){a.postMessage(b+p,"*")}}function l(){var b=r.documentElement;p=function(p){var c=r.createElement("script");
c.onreadystatechange=function(){f(p);c.onreadystatechange=null;b.removeChild(c);c=null};b.appendChild(c)}}function v(){p=function(b){setTimeout(f,0,b)}}if(!a.setImmediate){var n=1,t={},m=!1,r=a.document,p,b=Object.getPrototypeOf&&Object.getPrototypeOf(a),b=b&&b.setTimeout?b:a;"[object process]"==={}.toString.call(a.process)?k():g()?q():r&&"onreadystatechange"in r.createElement("script")?l():v();b.setImmediate=c;b.clearImmediate=d}})("undefined"===typeof self?"undefined"===typeof global?this:global:
self);(function(a){var h=function(c,a){var f=function(c){c=this["catch"](c);return{cancel:a,promise:c,then:h.bind(c),"catch":f.bind(c)}},h=function(c,q){var l=this.then(c,q);return{cancel:a,promise:l,then:h.bind(l),"catch":f.bind(l)}};return{cancel:a,promise:c,then:h.bind(c),"catch":f.bind(c)}};a.CancellablePromise=function(c,a){var f=!1,k,g=new Promise(function(h,g){k=function(){f||(a(),g("cancelled"))};(new Promise(c)).then(function(c){f=!0;h(c)},function(c){f=!0;g(c)})});return h(g,k)};a.CancellablePromise.all=
function(c){var a=Promise.all(c);return h(a,function(){c.forEach(function(c,a){c.cancel&&c.cancel()})})}})("undefined"===typeof self?this:self);(function(a){a.MessageHandler=function(h,c){this.name=h;this.comObj=c;this.callbackIndex=1;this.postMessageTransfers=!0;this.callbacksCapabilities={};var d=this.actionHandler={};this.actionHandlerAsync={};this.nextAsync=null;d.console_log=[function(c){}];d.console_error=[function(c){a.utils.error(c)}];d.workerLoaded=[function(c){}];c.addEventListener("message",this.handleMessage.bind(this))};a.MessageHandler.prototype={on:function(h,c,d){var f=this.actionHandler;f[h]&&a.utils.error('There is already an actionName called "'+
h+'"');f[h]=[c,d]},replace:function(a,c,d){this.actionHandler[a]=[c,d]},onAsync:function(h,c,d){var f=this.actionHandlerAsync;f[h]&&a.utils.error('There is already an actionName called "'+h+'"');f[h]=[c,d]},replaceAsync:function(a,c,d){var f=this.actionHandlerAsync,k=this.actionHandler;k[a]&&delete k[a];f[a]=[c,d]},onNextAsync:function(a){this.nextAsync=a},send:function(a,c){this.postMessage({action:a,data:c})},getNextId:function(){return this.callbackIndex++},sendWithPromise:function(a,c,d){var f=
this.getNextId();a={action:a,data:c,callbackId:f,priority:d};c=createPromiseCapability();this.callbacksCapabilities[f]=c;try{this.postMessage(a)}catch(k){c.reject(k)}return c.promise},sendWithPromiseReturnId:function(a,c,d){var f=this.getNextId();a={action:a,data:c,callbackId:f,priority:d};c=createPromiseCapability();this.callbacksCapabilities[f]=c;try{this.postMessage(a)}catch(k){c.reject(k)}return{promise:c.promise,callbackId:f}},sendWithPromiseWithId:function(h,c,d,f){c>this.callbackIndex&&a.utils.error("Can't reuse callbackId "+
c+" lesser than callbackIndex "+this.callbackIndex);c in this.callbacksCapabilities&&a.utils.error("Can't reuse callbackId "+c+". There is a capability waiting to be resolved. ");h={action:h,data:d,callbackId:c};d=createPromiseCapability();this.callbacksCapabilities[c]=d;try{this.postMessage(h)}catch(k){d.reject(k)}return d.promise},sendError:function(a,c){if(a.message||a.errorData){a.message&&a.message.message&&(a.message=a.message.message);var d=a.errorData;a={type:a.type?a.type:"JavascriptError",
message:a.message};if(d)for(var f in d)d.hasOwnProperty(f)&&(a[f]=d[f])}this.postMessage({isReply:!0,callbackId:c,error:a})},getPromise:function(h){if(h in this.callbacksCapabilities)return this.callbacksCapabilities[h];a.utils.error("Cannot get promise for callback "+h)},cancelPromise:function(h){if(h in this.callbacksCapabilities){var c=this.callbacksCapabilities[h];delete this.callbacksCapabilities[h];c.reject({type:"Cancelled",message:"Request has been cancelled."});this.postMessage({action:"actionCancel",
data:{callbackId:h}})}else a.utils.warn("Cannot cancel callback "+h)},postMessage:function(a){if(this.postMessageTransfers){var c=this.getTransfersArray(a);this.comObj.postMessage(a,c)}else this.comObj.postMessage(a)},getObjectTransfers:function(a,c){if("object"===typeof a)if(a instanceof Uint8Array)c.push(a.buffer);else if(a instanceof ArrayBuffer)c.push(a);else for(var d in a)a.hasOwnProperty(d)&&this.getObjectTransfers(a[d],c)},getTransfersArray:function(a){var c=[];this.getObjectTransfers(a,c);
return 0===c.length?void 0:c},handleMessage:function(h){var c=this,d=h.data,f=this.actionHandler,k=this.actionHandlerAsync;h=this.callbacksCapabilities;var g;d.isReply?(f=d.callbackId,f in h?(k=h[f],delete h[f],"error"in d?k.reject(d.error):k.resolve(d.data)):a.utils.warn("Cannot resolve callback "+f)):d.action in f?(g=f[d.action],d.callbackId?Promise.resolve().then(function(){return g[0].call(g[1],d.data)}).then(function(a){c.postMessage({isReply:!0,callbackId:d.callbackId,data:a})},function(a){c.sendError(a,
d.callbackId)}):g[0].call(g[1],d.data)):d.action in k?(g=k[d.action],d.callbackId?g[0].call(g[1],d).then(function(a){c.postMessage({isReply:!0,callbackId:d.callbackId,data:a});c.nextAsync()},function(a){c.sendError(a,d.callbackId);c.nextAsync()}):g[0].call(g[1],d).then(function(){c.nextAsync()},function(){c.nextAsync()})):a.utils.error("Unknown action from worker: "+d.action)}}})("undefined"===typeof window?this:window);(function(a){var h=a._trnDebugMode,c=a._logFiltersEnabled?a._logFiltersEnabled:{};a.utils=a.utils?a.utils:{};a.utils.warn=function(a,f){f||(f=a,a="default");h&&c[a]&&console.warn(a+": "+f)};a.utils.log=function(a,f){f||(f=a,a="default");h&&c[a]&&console.log(a+": "+f)};a.utils.error=function(a){h&&console.error(a);throw Error(a);};a.info=function(a,c){};a.warn=function(c,f){a.utils.warn(c,f)};a.error=function(c){a.utils.error(c)}})("undefined"===typeof window?this:window);(function(a){a.Module={TOTAL_MEMORY:50331648,noExitRuntime:!0,devicePixelRatio:1,cur_doc:null,cachePtrSize:0,hasBufOwnership:!0,loaded:!1,initCb:null,cachePtr:null,cleanupState:null,docs:{},postEvent:function(a,c,d){Module.workerMessageHandler.send("event",{docId:a,type:c,data:d})},postPagesUpdatedEvent:function(a,c,d){a={pageDimensions:Module.GetPageDimensions(a)};if(d)for(var f=0;f<d.length;++f)d[f]in a.pageDimensions?a.pageDimensions[d[f]].contentChanged=!0:console.warn("Invalid Page Number "+
d[f]);Module.postEvent(c,"pagesUpdated",a);return a},GetIndividualPageDimensions:function(a,c,d){a=Module.PageGetPageInfo(d);a.id=Module.PageGetId(d);return a},GetPageDimensionsRange:function(a,c,d){for(var f={},k=Module.PDFDocGetPageIterator(a,c);c<d&&Module.IteratorHasNext(k);++c){var g=Module.IteratorCurrent(k);f[c]=this.GetIndividualPageDimensions(a,c,g);Module.IteratorNext(k)}return f},GetPageDimensions:function(a){try{var c=Module.stackSave(),d=Module.GetPageCount(a);if(0===d)throw"This document has no pages.";
return Module.GetPageDimensionsRange(a,1,d+1)}finally{Module.stackRestore(c)}},loadDoc:function(a,c){"undefined"===typeof Module&&this._main();var d=null;try{var f=Module.stackSave();c=Module.CreateDoc(a,c);var k=Module.GetDoc(c);if(Module.PDFDocInitSecurityHandler(k))return{docId:c,pageDimensions:Module.GetPageDimensions(k)};d={type:"NeedsPassword",errorData:{docId:c},message:"This document requires a password"}}catch(g){d={type:"InvalidPDF",message:g}}finally{Module.stackRestore(f)}throw d;},loadCanvas:function(a,
c,d,f,k,g,q,l){return new Promise(function(v,n){var t=Module.GetDoc(a),m=c+1,r=function(){v(Module.RasterizePage(t,m,d,f,g,k,q,l))},p=Module.docs[a].chunkStorage;if(p){var b=Module.GetDownloadData(t).downloader,e=p.getRequiredChunkOffsetArrays(b,m);p.keepChunks(e.have);b=function(){var b=p.getChunks(e.missing);Module.loadPromise=b.then(function(){var b=Module.loadPromise.cancelled;Module.loadPromise=null;b||r()})["catch"](function(b){"cancelled"!==b?n(b):Module.loadPromise=null})};Module.loadPromise?
Module.loadPromise.then(b,b):b()}else r()})},loadResources:function(a,c){Module.Initialize(c);Module._TRN_PDFNetSetDefaultDiskCachingEnabled(!1);var d=new Uint8Array(a);Module.PDFNetSetResourceData(d)},onRuntimeInitialized:function(){"undefined"===typeof Module&&(("undefined"!==typeof window?window:self).Module={});(function(a){a.PDFDocExportXFDF=function(a,d){var f=Module.GetDoc(a),k=Module.stackSave(),g;try{var q;q=d?Module.PDFDocFDFExtract(f,d):Module.PDFDocFDFExtract(f);g=Module.FDFDocSaveAsXFDF(q);
Module.stackRestore(k)}catch(l){throw Module.stackRestore(k),l;}return g};a.PageArrayToPageSet=function(a){var d=Module.stackSave(),f;try{f=Module.PageSetCreate();for(var k=0;k<a.length;++k)Module.PageSetAddPage(f,a[k]);Module.stackRestore(d)}catch(g){throw Module.stackRestore(d),g;}return f};a.cancelCurrent=function(){var a=Module.loadPromise;return a?(a.cancel(),a.cancelled=!0):(a=Module.cleanupState)?(clearImmediate(a.timeout),a.cleanupArr.forEach(function(a){a()}),Module.cleanupState=null,!0):
!1};a.SetWorkerRestartCallback=function(a){Module.workerRestartCallback=a};a.XFDFMerge=function(a,d){if(d){var f=[];try{var k=Module.GetUStringFromJSString(d,!0);f.push(function(){Module.UStringDestroy(k)});var g=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_FDFDocCreateFromXFDF(k,g));var q=Module.getValue(g,"i8*");f.push(function(){Module.FDFDocDestroy(q)});REX(Module._TRN_PDFDocFDFUpdate(a,q))}finally{f.forEach(function(a){a()})}}};a.MergeXFDF=function(a,d){return new Promise(function(f,
k){var g=[];try{var q=Module.stackSave();g[g.length]=function(){Module.stackRestore(q)};var l=Module.GetDoc(a);Module.XFDFMerge(l,d);g.forEach(function(a){a()});f({})}catch(h){g.forEach(function(a){a()}),k(h)}})};a.CreateBufferFile=function(a,d){Module.MakeDev(a);for(var f=new ArrayBuffer(d),f=new Uint8Array(f),k=0;k<d;++k)f[k]=255;Module.docs[a]={buffer:f}};a.ReadBufferFile=function(a,d){var f=Module.docs[a].buffer;if(d){var k=new Uint8Array(f.buffer.slice());Module.docs[a].buffer=k}return f};a.RemoveBufferFile=
function(a){Module.docs[a]=null};a.SaveHelper=function(a,d,f){f="undefined"===typeof f?2:f;Module.MakeDev(d);a=Module._TRN_PDFDocSave(a,Module.GetUStringFromJSString(d),f,0);Module.docs[d].sink=null;REX(a);return Module.docs[d].buffer.buffer};a.SaveDoc=function(a,d,f,k,g){return new Promise(function(q,l){var h=Module.GetDoc(a),n=[];try{var h=Module.GetDoc(a),t=Module.stackSave();n[n.length]=function(){Module.stackRestore(t)};Module.XFDFMerge(h,d);for(var m=Module.PDFDocGetPageIterator(h,1);Module.IteratorHasNext(m);){var r=
Module.IteratorCurrent(m);try{for(var p=Module.PageGetNumAnnots(r);0<p;){var b=Module.PageGetAnnot(r,--p);Module.AnnotHasAppearance(b)||Module.AnnotRefreshAppearance(b)}}catch(y){Module.ObjErase(r,"Annots")}Module.IteratorNext(m)}m=0;if(k){var e=Module.PDFDocGetRoot(h);(m=Module.ObjFindObj(e,"OpenAction"))&&Module.ObjPut(e,"__OpenActionBackup__",m);var u=Module.ObjPutDict(e,"OpenAction");Module.ObjPutName(u,"Type","Action");Module.ObjPutName(u,"S","JavaScript");Module.ObjPutString(u,"JS","this.print()")}var x=
Module.SaveHelper(h,a,g);k&&(m?Module.ObjPut(e,"OpenAction",Module.ObjFindObj(e,"__OpenActionBackup__")):Module.ObjErase(e,"OpenAction"));n.forEach(function(b){b()});if(f)q({fileData:x});else{var w=x.slice(0);q({fileData:w})}}catch(y){n.forEach(function(b){b()}),l(y)}})};a.SaveDocFromFixedElements=function(a,d,f){a=Module.PDFDocCreateFromLayoutEls(a);a=Module.CreateDoc({type:"ptr",value:a});return Module.SaveDoc(a,d,!0,!1,f)};a.GetCurrentCanvasData=function(a){var d=Module.currentRenderData;if(!d)return null;
a&&REX(Module._TRN_PDFRasterizerUpdateBuffer(d.rast));Date.now();return{pageBuf:Module.ReadBufferFile("b",a).buffer,pageWidth:d.out_width,pageHeight:d.out_height}};a.RasterizePage=function(a,d,f,k,g,q,l,h){return new Promise(function(n,t){Module.currentRenderData={};var m=Module.currentRenderData;m.out_width=parseInt(f,10);m.out_height=parseInt(k,10);var r=[];r.push(function(){Module.currentRenderData=null});try{var p=Module.stackSave();r[r.length]=function(){Module.stackRestore(p)};var b=Module.GetPage(a,
d),e=Module.PageGetPageWidth(b),u=Module.PageGetPageHeight(b);m.stride=4*m.out_width;m.buf_size=m.out_width*m.out_height*4;m.rast=Module.PDFRasterizerCreate();r.push(function(){Module._TRN_PDFRasterizerDestroy(m.rast)});if(l){var x=Module.EMSCreateUpdatedLayersContext(a,l);0!==x&&(Module._TRN_PDFRasterizerSetOCGContext(m.rast,x),r.push(function(){Module._TRN_OCGContextDestroy(x)}))}var w=Module.PageGetRotation(b),y=1===q||3===q,w=(1===w||3===w)!==y,B,z=Module.allocate(48,"i8",Module.ALLOC_STACK),
A;if(g){g.x1=g[0];g.y1=g[1];g.x2=g[2];g.y2=g[3];var D=Module.PageGetDefaultMatrix(b,0),E=Module.Matrix2DInverse(D);g=Module.Matrix2DMultBBox(E,g);var C;g.x2<g.x1&&(C=g.x1,g.x1=g.x2,g.x2=C);g.y2<g.y1&&(C=g.y1,g.y1=g.y2,g.y2=C);B=m.out_width/(w?g.y2-g.y1:g.x2-g.x1);A=Module.GetDefaultMatrixBox(b,g,q)}else A=Module.PageGetDefaultMatrix(b,q),B=m.out_width/(y?u:e);Module.Matrix2DSet(z,B,0,0,B,0,0);Module.Matrix2DConcat(z,A);r.push(function(){Module._free(m.bufPtr)});var F=Module.allocate(4,"i8",Module.ALLOC_STACK),
G=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFRasterizerSetDrawAnnotations(m.rast,0));Module.CreateBufferFile("b",m.buf_size);r.push(function(){Module.RemoveBufferFile("b")});if(10===h){REX(Module._TRN_PDFRasterizerSetOverprint(m.rast,1));var H=Module.PDFRasterizerRasterizeSeparations(m.rast,b,m.out_width,m.out_height,z,0,0);n({pageBuf:H,pageWidth:m.out_width,pageHeight:m.out_height})}else{REX(Module._TRN_PDFRasterizerSetOverprint(m.rast,h));REX(Module._TRN_PDFRasterizerGetChunkRendererPath(m.rast,
b,Module.GetUStringFromJSString("b"),m.out_width,m.out_height,!0,z,0,0,0,F));var I=Module.getValue(F,"i8*");r.splice(1,0,function(){REX(Module._TRN_ChunkRendererDestroy(I))})}(new Date).getTime();var J=function(){try{for(var b=0,p=(new Date).getTime(),a=!1;200>b;){REX(Module._TRN_ChunkRendererRenderNext(I,G));if(!Module.getValue(G,"i8*")){a=!0;break}b=(new Date).getTime()-p}if(a){var e=Module.GetCurrentCanvasData(!1);r.forEach(function(b){b()});n(e)}else Module.cleanupState.timeout=setImmediate(J,
0)}catch(c){r.forEach(function(b){b()}),t(c)}},L=setImmediate(J,0);Module.cleanupState={cleanupArr:r,timeout:L};r.push(function(){Module.cleanupState=null})}catch(K){r.forEach(function(b){b()}),t(K)}})};a.GetDestinationVPosHPos=function(a){var d=0,f=0,k=!1,g=!1,q=Module.DestinationGetPage(a),l=Module.DestinationGetExplicitDestObj(a),q=Module.PageGetDefaultMatrix(q),q=Module.Matrix2DInverse(q),h=Module.Matrix2DMult(q,{x:f,y:d}),f=h.x,d=h.y,n;try{switch(Module.DestinationGetFitType(a)){case 2:case 6:n=
Module.ObjGetAt(l,2);Module.ObjIsNumber(n)&&(d=Module.ObjGetNumber(n),k=!0);break;case 0:n=Module.ObjGetAt(l,2);Module.ObjIsNumber(n)&&(f=Module.ObjGetNumber(n),g=!0);n=Module.ObjGetAt(l,3);Module.ObjIsNumber(n)&&(d=Module.ObjGetNumber(n),k=!0);break;case 4:n=Module.ObjGetAt(l,2);Module.ObjIsNumber(n)&&(f=Module.ObjGetNumber(n),g=!0);n=Module.ObjGetAt(l,5);Module.ObjIsNumber(n)&&(d=Module.ObjGetNumber(n),k=!0);break;case 3:case 7:n=Module.ObjGetAt(l,2),Module.ObjIsNumber(n)&&(f=Module.ObjGetNumber(n),
g=!0)}h=Module.Matrix2DMult(q,{x:f,y:d});f=h.x;d=h.y;k||(d=0);g||(f=0)}catch(t){f=d=0}return{hpos:f,vpos:d}};a.FillBookmarkTree=function(a,d){for(var f=0;Module.BookmarkIsValid(a);a=Module.BookmarkGetNext(a),++f)try{var k=[];if(Module.BookmarkHasChildren(a)){var g=Module.BookmarkGetFirstChild(a);Module.FillBookmarkTree(g,k)}var q=Module.BookmarkGetTitle(a),k={children:k,name:q},l=Module.BookmarkGetAction(a);if(Module.ActionIsValid(l)){var h=Module.ActionGetType(l);if(0===h){var n=Module.ActionGetDest(l);
if(Module.DestinationIsValid(n)){var t=Module.DestinationGetPage(n);if(Module.PageIsValid(t)){var m=Module.PageGetIndex(t);if(0<m){k.pageNumber=m;var r=Module.GetDestinationVPosHPos(n);k.verticalOffset=r.vpos;k.horizontalOffset=r.hpos}}}}else if(5===h){var p=Module.ObjFindObj(l,"URI");p&&(k.url=Module.ObjGetAsPDFText(p))}}d[d.length]=k}catch(b){}};a.LoadBookmarks=function(a){a=Module.GetDoc(a);var d=[],f=Module.stackSave();try{var k=Module.PDFDocGetFirstBookmark(a);Module.BookmarkIsValid(k)&&Module.FillBookmarkTree(k,
d)}catch(g){}Module.stackRestore(f);return{bookmarks:d}};a.UpdatePassword=function(a,d){try{var f=Module.stackSave(),k=Module.GetDoc(a);return Module.PDFDocInitStdSecurityHandler(k,d)?(k in downloadDataMap&&REX(Module._TRN_PDFDocDownloaderInitialize(k,downloadDataMap[k].downloader)),{success:!0,pageDimensions:Module.GetPageDimensions(k)}):{success:!1}}finally{Module.stackRestore(f)}};a.GetTextData=function(a,d){return new Promise(function(f,k){var g=d+1,q=Module.GetDoc(a),l=[];try{var h=Module.stackSave();
l[l.length]=function(){Module.stackRestore(h)};var n=Module.GetPage(q,g),t=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module._TRN_TextExtractorCreate(t));var m=Module.getValue(t,"i8*");l[l.length]=function(){Module._TRN_TextExtractorDestroy(m)};REX(Module._TRN_TextExtractorBegin(m,n,0,1));var r=Module.allocate(48,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetDefaultMatrix(n,!0,1,0,r));var p=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_TextExtractorGetQuads(m,r,0,p));var b=Module.getValue(p,
"i8*"),e=Module._malloc(8*b);l[l.length]=function(){Module._free(e)};REX(Module._TRN_TextExtractorGetQuads(m,r,e,p));var u=Module.GetJSDoubleArrFromCore(e,b),x=Module.allocate(4,"i8",Module.ALLOC_STACK),w=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_UStringCreate(w));l[l.length]=function(){Module._TRN_UStringDestroy(y)};var y=Module.getValue(w,"i8*");REX(Module._TRN_TextExtractorGetAsTextWithOffsets(m,y,0,x));var B=Module.GetJSStringFromUString(y),z=Module.getValue(x,"i8*"),A=Module._malloc(4*
z);l[l.length]=function(){Module._free(A)};REX(Module._TRN_TextExtractorGetAsTextWithOffsets(m,y,A,x));var D=Module.GetJSIntArrayFromCore(A,z),E=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_TextExtractorCmptSemanticInfo(m,r,0,E));var C=Module.getValue(E,"i8*"),F=Module._malloc(8*C);l[l.length]=function(){Module._free(F)};REX(Module._TRN_TextExtractorCmptSemanticInfo(m,r,F,E));var G=Module.GetJSDoubleArrFromCore(F,C);l.forEach(function(b){b()});f({str:B,quads:u,offsets:D,struct:G})}catch(H){l.forEach(function(b){b()}),
k(H)}})};a.InsertBlankPages=function(a,d,f,k){return new Promise(function(g,q){var l=[],h=Module.GetDoc(a);try{var n=Module.stackSave();l[l.length]=function(){Module.stackRestore(n)};for(var t=d.length-1;0<=t;--t){var m=Module.PDFDocGetPageIterator(h,d[t]),r=Module.PDFDocPageCreate(h,f,k);Module.PDFDocPageInsert(h,m,r)}var p=Module.postPagesUpdatedEvent(h,a);l.forEach(function(b){b()});g(p)}catch(b){l.forEach(function(b){b()}),q(b)}})};a.InsertPages=function(a,d,f,k,g){return new Promise(function(h,
l){var v=[],n=Module.GetDoc(a);try{var t=Module.stackSave();v[v.length]=function(){Module.stackRestore(t)};var m;if(d instanceof ArrayBuffer){var r=Module.CreateDoc(d);m=Module.GetDoc(r);v[v.length]=function(){Module.DeleteDoc(r)}}else m=Module.GetDoc(d);for(var p=f.length,b=Module.PageSetCreate(),e=0;e<p;++e)Module.PageSetAddPage(b,f[e]);Module.PDFDocInsertPages(n,k,m,b,g);var u=Module.postPagesUpdatedEvent(n,a);v.forEach(function(b){b()});h(u)}catch(x){v.forEach(function(b){b()}),l(x)}})};a.MovePages=
function(a,d,f){return new Promise(function(k,g){var h=[],l=Module.GetDoc(a);try{var v=Module.stackSave();h[h.length]=function(){Module.stackRestore(v)};for(var n=d.length,t=Module.PageSetCreate(),m=0;m<n;++m)Module.PageSetAddPage(t,d[m]);Module.PDFDocMovePages(l,f,t);var r=Module.postPagesUpdatedEvent(l,a);h.forEach(function(a){a()});k(r)}catch(p){h.forEach(function(b){b()}),g(p)}})};a.RemovePages=function(a,d){return new Promise(function(f,k){var g=Module.GetDoc(a),h=[];try{var l=Module.stackSave();
h[h.length]=function(){Module.stackRestore(l)};for(var v=d.length-1;0<=v;--v){var n=Module.PDFDocGetPageIterator(g,d[v]);Module.IteratorHasNext(n)&&Module.PDFDocPageRemove(g,n)}var t=Module.postPagesUpdatedEvent(g,a);h.forEach(function(a){a()});f(t)}catch(m){h.forEach(function(a){a()}),k(m)}})};a.RotatePages=function(a,d,f){return new Promise(function(k,g){var h=Module.GetDoc(a),l=[];try{var v=Module.stackSave();l[l.length]=function(){Module.stackRestore(v)};var n=d.length,t=0,m=Module.PDFDocGetPageIterator(h,
d[0]),r=[];l.push(function(){Module._TRN_IteratorDestroy(m)});for(var p=d[0];Module.IteratorHasNext(m)&&t<d[n-1];++p){if(p===d[t]){var b=Module.IteratorCurrent(m),e=(Module.PageGetRotation(b)+f)%4;Module.PageSetRotation(b,e);r.push(p);t++}Module.IteratorNext(m)}var u=Module.postPagesUpdatedEvent(h,a,r);l.forEach(function(b){b()});k(u)}catch(x){l.forEach(function(b){b()}),g(x)}})};a.ExtractPages=function(a,d,f){return new Promise(function(k,g){var h=[];try{var l=Module.stackSave();h[h.length]=function(){Module.stackRestore(l)};
var v=function(a){h.forEach(function(a){a()});g(a)};Module.XFDFMerge(a,f);var n=Module.CreateEmptyDoc();h[h.length]=function(){Module.DeleteDoc(n)};var t=Module.InsertPages(n,a,d,1,!0).then(function(){return Module.SaveDoc(n,void 0,!0,!1,void 0)}).then(function(a){h.forEach(function(a){a()});return a})["catch"](v);k(t)}catch(m){v(m)}})};a.CropPages=function(a,d,f,k,g,h){return new Promise(function(l,v){var n=Module.GetDoc(a),t=[];try{var m=Module.stackSave();t[t.length]=function(){Module.stackRestore(m)};
var r=d.length,p=0,b=Module.PDFDocGetPageIterator(n,d[0]);t.push(function(){Module._TRN_IteratorDestroy(b)});for(var e=[],u=d[0];Module.IteratorHasNext(b)&&p<d[r-1];++u){if(u===d[p]){var x=Module.IteratorCurrent(b),w=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetCropBox(x,w));var y=Module.PageGetRotation(x),B=Module.getValue(w,"double"),z=Module.getValue(w+8,"double"),A=Module.getValue(w+16,"double"),D=Module.getValue(w+24,"double");0===y%4?(Module.setValue(w,B+g,"double"),Module.setValue(w+
8,z+k,"double"),Module.setValue(w+16,A-h,"double"),Module.setValue(w+24,D-f,"double")):1===y%4?(Module.setValue(w,B+f,"double"),Module.setValue(w+8,z+g,"double"),Module.setValue(w+16,A-k,"double"),Module.setValue(w+24,D-h,"double")):2===y%4?(Module.setValue(w,B+h,"double"),Module.setValue(w+8,z+f,"double"),Module.setValue(w+16,A-g,"double"),Module.setValue(w+24,D-k,"double")):3===y%4&&(Module.setValue(w,B+k,"double"),Module.setValue(w+8,z+h,"double"),Module.setValue(w+16,A-f,"double"),Module.setValue(w+
24,D-g,"double"));Module.setValue(w+32,0,"double");REX(Module._TRN_PageSetCropBox(x,w));e.push(u);p++}Module.IteratorNext(b)}var E=Module.postPagesUpdatedEvent(n,a,e);t.forEach(function(b){b()});l(E)}catch(C){t.forEach(function(b){b()}),v(C)}})}})("undefined"===typeof self?this.Module:self.Module);this.loaded=!0;Module.initCb&&Module.initCb()}}})("undefined"===typeof self?this:self);var global="undefined"!==typeof window?window:self;
(function(a){a.currentFileString="/current";var h=0,c=0,d={},f=null;Module.chunkMax=200;var k=function(a,b,e,u){var c=new XMLHttpRequest;return CancellablePromise(function(d,f){c.open("GET",a,!0);c.responseType="arraybuffer";c.onerror=function(){f("Network error occurred")};c.onload=function(){if(206===this.status&&c.response.byteLength===e){var b=new Int8Array(c.response);d(b)}else f("Download Failed")};var g=["bytes=",b,"-",b+e-1].join("");c.setRequestHeader("Range",g);if(u)for(var k in u)c.setRequestHeader(k,
u[k]);c.send()},function(){c.abort()})},g=function(a){this.file=a;this.position=0;this.length=a.size;this.reader=new FileReaderSync};g.prototype={read:function(a,b,e){e=this.position+e<=this.length?e:this.length-this.position;a=a.subarray(b,b+e);b=new Int8Array(this.reader.readAsArrayBuffer(this.file.slice(this.position,this.position+e)));a.set(b);this.position+=e;return e},seek:function(a){this.position=a},close:function(){this.reader=this.file=null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};
var q=function(a){this.data=a;this.position=0;this.length=this.data.length};q.prototype={read:function(a,b,e){e=this.position+e<=this.length?e:this.length-this.position;a=a.subarray(b,b+e);b=this.data.subarray(this.position,this.position+e);a.set(b);this.position+=e;return e},write:function(a,b,e){e=this.position+e<=this.length?e:this.length-this.position;a=a.subarray(b,b+e);this.data.subarray(this.position,this.position+e).set(a);this.position+=e;return e},seek:function(a){this.position=a},close:function(){this.data=
null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};var l=function(a,b,e,u){"object"===typeof a?(this.lruList=a.lruList,this.chunkMap=a.chunkMap,this.length=a.length,this.url=a.url,this.customHeaders=a.customHeaders):(this.lruList=[],this.chunkMap={},this.chunkMap[b]=u,this.length=b,this.url=a,this.customHeaders=e)};l.prototype={lruUpdate:function(a){var b=this.lruList.lastIndexOf(a);0<=b&&this.lruList.splice(b,1);this.lruList.push(a)},getChunk:function(a){if(this.chunkMap[a])this.lruUpdate(a);
else{var b=Math.min(a+524288,this.length)-1,e=new XMLHttpRequest;e.open("GET",this.url,!1);e.responseType="arraybuffer";e.setRequestHeader("Range",["bytes=",a,"-",b].join(""));if(this.customHeaders)for(var u in this.customHeaders)e.setRequestHeader(u,this.customHeaders[u]);e.send();if(200===e.status||206===e.status)this.writeChunk(new Int8Array(e.response),a);else throw Error("Failed to load data from");}return this.chunkMap[a]},hadChunk:function(a){return a in this.chunkMap},hasChunk:function(a){return this.chunkMap[a]},
getCacheData:function(){return this.chunkMap[this.length]},getRequiredChunkOffsetArrays:function(a,b){var e={have:[],downloading:[],missing:[]};try{var u=Module.stackSave(),c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DownloaderGetRequiredChunksSize(a,b,c));var d=Module.getValue(c,"i8*");if(d){var f=Module._malloc(4*d);REX(Module._TRN_DownloaderGetRequiredChunks(a,b,f,d));for(c=0;c<d;++c){var g=Module.getValue(f+4*c,"i8*");this.hasChunk(g)?e.have.push(g):this.hadChunk(g)?e.missing.push(g):
e.downloading.push(g)}}}finally{f&&Module._free(f),Module.stackRestore(u)}return e},keepVisibleChunks:function(a,b){for(var e=b.length,u=Module.chunkMax/2,c=0,d=0;d<e;++d){var f=this.getRequiredChunkOffsetArrays(a,b[d]),g=f.have,k=g.length,c=c+k;if(c>u){this.keepChunks(g.slice(0,k-c+u));break}this.keepChunks(f.have)}},getChunkAsync:function(a){var b=this,e=a+524288,u=524288;e>this.length&&(u-=e-this.length);return k(this.url,a,u,this.customHeaders).then(function(e){b.writeChunk(e,a)})},getChunks:function(a){for(var b=
a.length,e=Array(b),u=0;u<b;++u)e[u]=this.getChunkAsync(a[u]);return CancellablePromise.all(e)},keepChunks:function(a){for(var b=a.length,e=0;e<b;++e)this.lruUpdate(a[e])},writeChunk:function(a,b,e){e=e||0;var u=this.chunkMap[b],c=a.length,d=this.lruList.length>=Module.chunkMax&&!u;524288!==c||a.buffer.byteLength!==c?(d?(u=this.lruList.shift(),d=this.chunkMap[u],524288>d.length&&(d=new Int8Array(524288)),this.chunkMap[u]=null):d=u?this.chunkMap[b]:new Int8Array(524288),d.subarray(e,e+c).set(a),a=
d):d&&(u=this.lruList.shift(),this.chunkMap[u]=null);this.lruUpdate(b);this.chunkMap[b]=a}};var v=function(a){this.chunkStorage=a;this.position=0;this.length=this.chunkStorage.length};v.prototype={read:function(a,b,e){var u=this.position+e<=this.length,c=u?e:this.length-this.position,d,f;if(this.position<this.length){var g;for(g=0;g<c;){f=this.position%524288;var k=this.position-f,h=c-g;if(this.chunkStorage.hadChunk(k))k=this.chunkStorage.getChunk(k),d=a.subarray(b+g,b+g+h),f=k.subarray(f,f+h),d.set(f),
f=f.length,g+=f,this.position+=f;else for(this.position+=h;g<c;++g)d[g]=0}}if(!u){d=b+c;if(e-=c)b=this.chunkStorage.getCacheData(),e>b.length&&(e=b.length),u=this.position-this.length,d=a.subarray(d,d+e),f=b.subarray(u,u+e),d.set(f);this.position+=e;return c+e}return c},write:function(a,b,e){var c=this.position+e<=this.length,d=this.position+e<=this.length?e:this.length-this.position,f=a.subarray(b,b+d),g=this.position%524288;this.chunkStorage.writeChunk(f,this.position-g,g);this.position+=d;if(!c){f=
b+d;if(e-=d)b=this.chunkStorage.getCacheData(),e>b.length&&(e=b.length),c=this.position-this.length,f=a.subarray(f,f+e),b.subarray(c,c+e).set(f);this.position+=e;return d+e}return d},seek:function(a){this.position=a},close:function(){this.chunkStorage=null},getPos:function(){return this.position},getTotalSize:function(){return this.length}};var n=function(a){this.docId=a;this.length=0;this.data=new Int8Array(8192);this.position=0};n.prototype={seek:function(a){this.position=a},close:function(){var a=
new Int8Array(this.data.buffer.slice(0,this.length));Module.ChangeDocBackend(this.docId,{ptr:Module.GetDoc(this.docId),buffer:a});this.data=null},getPos:function(){return this.position},getTotalSize:function(){return this.length},read:function(a,b,e){var c=this.data.length;e=e+b<c?e:c-b;a=a.subarray(b,b+e);b=this.data.subarray(this.position,this.position+e);a.set(b);this.position+=e;return e},write:function(a,b,e){for(var c=this.position+e,d=this.data.length;c>d;){var d=Math.max(d*(16777216<d?1.5:
2),c),f=new Int8Array(d);f.set(this.data.subarray(0,this.length),0);this.data=f}a=a.subarray(b,b+e);this.data.set(a,this.position);this.position+=e;this.position>this.length&&(this.length=this.position);return e}};var t={IsSink:function(a){return 66===(a.flags&255)},open:function(a){var b=a.path.slice(1);this.IsSink(a)?(a.provider=new n(b),Module.docs[b].sink=a.provider):a.provider=Module.docs[b].sink?new q(Module.docs[b].sink.data):Module.docs[b].chunkStorage?new v(Module.docs[b].chunkStorage):Module.docs[b].buffer?
new q(Module.docs[b].buffer):new g(Module.docs[b].file)},close:function(a){a.provider.close()},read:function(a,b,e,c,d){return a.provider.read(b,e,c)},llseek:function(a,b,e){a=a.provider;1===e?b+=a.getPos():2===e&&(b=a.getTotalSize()+b);if(0>b)throw new FS.ErrnoError(global.ERRNO_CODES.EINVAL);a.seek(b);return b},write:function(a,b,e,c,d){return c?a.provider.write(b,e,c):0}};global.THROW=function(a){throw{type:"InvalidPDF",message:a};};global.REX=function(a){a&&THROW(m(a))};var m=function(a){return"Exception: \n\t Message: "+
Module.Pointer_stringify(Module._TRN_GetMessage(a))+"\n\t Filename: "+Module.Pointer_stringify(Module._TRN_GetFileName(a))+"\n\t Function: "+Module.Pointer_stringify(Module._TRN_GetFunction(a))+"\n\t Linenumber: "+Module.Pointer_stringify(Module._TRN_GetLineNum(a))};a.GetErrToString=m;a.Initialize=function(a){var b=Module.stackSave();a=a?Module.allocate(Module.intArrayFromString(a),"i8",Module.ALLOC_STACK):0;REX(Module._TRN_PDFNetInitialize(a));Module.stackRestore(b)};a.GetDoc=function(a){if(a in
Module.docs)return Module.docs[a].ptr;throw{type:"InvalidDocReference",message:"Unable to access Document id="+a+". The document appears to be invalid or was deleted."};};a.clearDocBackend=function(){null!==Module.cachePtr?(Module.hasBufOwnership&&Module._free(Module.cachePtr),Module.cachePtr=null):Module.docs[a.currentFileString]&&delete Module.docs[a.currentFileString]};a.MakeDev=function(a){if(!d[a]){var b=FS.makedev(3,5);FS.registerDevice(b,t);FS.mkdev(a,511,b);d[a]=!0}};a.CreateDocFileBackend=
function(a,b){Module.MakeDev(b);var e=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.docs[b]={file:a};var c=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocCreateFromFilePath(c,e));e=Module.getValue(e,"i8*");Module.docs[b].ptr=e};a.InsertImageIntoDoc=function(a,b,e){var c=[];try{var d=Module.ElementBuilderCreate();c.push(function(){Module.ElementBuilderDestroy(d)});var f=Module.ElementWriterCreate();c.push(function(){Module.ElementWriterDestroy(f)});
var g,k;e?(g=e.width,k=e.height):(g=Module.ImageGetImageWidth(b),k=Module.ImageGetImageHeight(b),e=g/k,1<e?(g=612,k=parseInt(g/e,10)):(k=792,g=parseInt(k*e,10)));var h=Module.ElementBuilderCreateImage(d,b,0,0,g,k),l=Module.PDFDocPageCreate(a,g,k);Module.ElementWriterBegin(f,l);Module.ElementWriterWritePlacedElement(f,h);Module.ElementWriterEnd(f);Module.PDFDocPagePushBack(a,l)}finally{c.forEach(function(a){a()})}};var r=function(a,b,e){"object"===typeof a?(this.m_pages=a.m_pages,this.m_has_named_dests=
a.m_has_named_dests,this.m_finished_download=a.m_finished_download,this.m_has_outline=a.m_has_outline,this.m_current_page=a.m_current_page,this.m_id=a.m_id,this.size=a.size,this.timeout=a.timeout,this.eventPageArray=a.eventPageArray,this.requirePageCallbacks=a.requirePageCallbacks):(this.m_pages=[],this.m_has_outline=this.m_finished_download=this.m_has_named_dests=!1,this.m_current_page=1,this.m_id=e,this.size=a,this.timeout=null,this.eventPageArray=[],this.requirePageCallbacks={});this.downloadUserData=
Module.createDownloadUserData(b,e)};r.prototype={getJSUrl:function(){return Module.extractDownloadUserData(this.downloadUserData).url},getDocId:function(){return Module.extractDownloadUserData(this.downloadUserData).docId},destroyUserData:function(){this.m_id in Module.customHeadersMap&&delete Module.customHeadersMap[this.m_id];Module.destroyDownloadUserData(this.downloadUserData)}};a.createDownloadUserData=function(a,b){var e=Module.allocate(Module.intArrayFromString(a),"i8",Module.ALLOC_NORMAL),
c=Module.allocate(8,"i8",Module.ALLOC_NORMAL);Module.setValue(c,e,"i8*");Module.setValue(c+4,parseInt(b,10),"i32");return this.downloadUserData=c};a.extractDownloadUserData=function(a){var b=Module.getValue(a,"i8*"),b=Module.Pointer_stringify(b);a=Module.getValue(a+4,"i32").toString();return{url:b,docId:a}};a.destroyDownloadUserData=function(a){Module._free(Module.getValue(a,"i8*"));Module._free(a)};global.downloadDataMap={};Module.customHeadersMap={};a.GetDownloadData=function(a){if(a in downloadDataMap)return downloadDataMap[a]};
a.DownloaderHint=function(a,b){var e=Module.GetDoc(a),c=downloadDataMap[e];b.currentPage&&(c.m_current_page=b.currentPage);if(b.visiblePages){var d=b.visiblePages,f;for(f=0;f<d.length;++f)++d[f];for(var g in this.requirePageCallbacks)this.requirePageCallbacks.hasOwnProperty(g)&&d.push(parseInt(g,10));(f=Module.docs[a].chunkStorage)&&f.keepVisibleChunks(c.downloader,d);c=d.length;g=Module.allocate(4*c,"i8",Module.ALLOC_STACK);for(f=0;f<c;++f)Module.setValue(g+4*f,d[f],"i32");REX(Module._TRN_PDFDocDownloadPages(e,
g,c,1,0))}};a.RequirePage=function(a,b){return new Promise(function(e,c){var d=Module.GetDoc(a),f=downloadDataMap[d];f&&!f.m_pages[b]?(b in f.requirePageCallbacks?f.requirePageCallbacks[b].push(e):f.requirePageCallbacks[b]=[e],f=Module.allocate(4,"i8",Module.ALLOC_STACK),Module.setValue(f,b,"i32"),Module._TRN_PDFDocDownloadPages(d,f,1,0,0)):e()})};a.IsLinearizationValid=function(a){a=Module.GetDoc(a);if(a=downloadDataMap[a]){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DownloaderIsLinearizationValid(a.downloader,
b));return 0!==Module.getValue(b,"i8")}return!1};a.ShouldRunRender=function(a,b){var e=Module.GetDoc(a);return(e=downloadDataMap[e])?e.m_pages[b]:!0};a.createCallbacksStruct=function(a){if(!f){var b=function(a){return function(b){var p=arguments;b in downloadDataMap?a.apply(this,p):setImmediate(function(){b in downloadDataMap&&a.apply(this,p)},0)}};f={downloadProc:Module.addFunction(function(a,b,p,c,d){c=Module.extractDownloadUserData(c);var f=c.docId;k(c.url,b,p,Module.customHeadersMap[f]).then(function(c){f in
Module.docs&&Module.docs[f].chunkStorage&&Module.docs[f].chunkStorage.writeChunk(c,b);Module._TRN_DownloadComplete(0,b,p,a)})}),notifyUpdatePage:Module.addFunction(b(function(a,b,p,c){var d=downloadDataMap[a];d.m_pages[b]=!0;var f=d.eventPageArray;if(b in d.requirePageCallbacks)for(p=d.requirePageCallbacks[b],c=0;c<p.length;++c)p[c]();d.timeout?f.push(b):(f=d.eventPageArray=[b],d.timeout=setTimeout(function(){Module.postPagesUpdatedEvent(a,d.m_id,f);d.timeout=null},100))})),notifyUpdateOutline:Module.addFunction(b(function(a,
b){var c=downloadDataMap[a];c.m_has_outline||(c.m_has_outline=!0,Module.postEvent(c.m_id,"bookmarksUpdated",{}))})),notifyUpdateNamedDests:Module.addFunction(b(function(a,b){var c=downloadDataMap[a];c.m_has_named_dests||(c.m_has_named_dests=!0)})),notifyUpdateThumb:Module.addFunction(b(function(a,b){})),notifyFinishedDownload:Module.addFunction(b(function(a,b){var c=downloadDataMap[a];c.m_finished_download||(c.m_finished_download=!0,Module.postEvent(c.m_id,"documentComplete",{}))})),notifyDocumentError:Module.addFunction(function(a,
b){}),getCurrentPage:Module.addFunction(function(a,b){return downloadDataMap[a].m_current_page})}}b=Module.allocate(40,"i8",Module.ALLOC_STACK);Module.setValue(b,f.downloadProc,"i8*");Module.setValue(b+4,a,"i8*");Module.setValue(b+8,f.notifyUpdatePage,"i8*");Module.setValue(b+12,f.notifyUpdateOutline,"i8*");Module.setValue(b+16,f.notifyUpdateNamedDests,"i8*");Module.setValue(b+20,f.notifyUpdateThumb,"i8*");Module.setValue(b+24,f.notifyFinishedDownload,"i8*");Module.setValue(b+28,f.notifyDocumentError,
"i8*");Module.setValue(b+32,f.getCurrentPage,"i8*");Module.setValue(b+36,0,"i8*");return b};a.CreateDocDownloaderBackend=function(a,b,e){var c=a.url,d=a.size,f=a.customHeaders;f&&(Module.customHeadersMap[e]=f);var g;g=a.downloadData?new r(a.downloadData,c,e,f):new r(a.size,c,e,f);var k=Module.createCallbacksStruct(g.downloadUserData),h=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.MakeDev(e);a.chunkStorage?c=new l(a.chunkStorage):(a=new Int8Array(new ArrayBuffer(Math.ceil((a.size+524288-1)/524288/
8))),c=new l(c,d,f,a));Module.docs[e]={chunkStorage:c};REX(Module._TRN_DownloaderCreate(k,d,Module.GetUStringFromJSString(e),h));g.downloader=Module.getValue(h,"i8*");if(d=Module._TRN_PDFDocCreateFromFilter(g.downloader,b))Module._TRN_FilterDestroy(g.downloader),REX(d);b=Module.getValue(b,"i8*");Module.docs[e].ptr=b;Module.PDFDocInitSecurityHandler(b)&&REX(Module._TRN_PDFDocDownloaderInitialize(b,g.downloader));downloadDataMap[b]=g};a.CreateDocBackend=function(c,b){var e=c.value,d=c.extension,f=c.type,
g=Module.allocate(4,"i8",Module.ALLOC_STACK),k=Module.stackSave();try{if(e)if("ptr"===f)Module.docs[b]={ptr:e};else{var l,f=d&&"pdf"!==d;if("object"===typeof e&&e.url)a.CreateDocDownloaderBackend(e,g,b);else{var t=e instanceof ArrayBuffer,m=t?"buffer":"file";if(t&&(e=new Uint8Array(e),10485760>e.length+h&&!f)){h+=e.length;var n=e.length,q=Module._malloc(e.length);Module.HEAPU8.set(e,q);REX(Module._TRN_PDFDocCreateFromBuffer(q,n,g));l=Module.getValue(g,"i8*");Module.docs[b]={ptr:l,bufPtr:q,bufPtrSize:n,
ownership:!0};Module.docs[b].extension=d;return}Module.MakeDev(b);t={};t[m]=e;Module.docs[b]=t;if(f){var r;c.pageSizes&&c.pageSizes.length?r=c.pageSizes[0]:c.defaultPageSize&&(r=c.defaultPageSize);var v=Module.GetUStringFromJSString(b);REX(Module._TRN_PDFDocCreate(g));l=Module.getValue(g,"i8*");var G=Module.ImageCreateFromFile(l,v);Module.InsertImageIntoDoc(l,G,r)}else{var H=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocCreateFromFilePath(H,g));l=Module.getValue(g,
"i8*")}Module.docs[b].extension=d;Module.docs[b].ptr=l}}else REX(Module._TRN_PDFDocCreate(g)),l=Module.getValue(g,"i8*"),Module.docs[b]={ptr:l},Module.docs[b].extension=d}finally{Module.stackRestore(k)}};a.ChangeDocBackend=function(c,b){var e=Module.docs[c];e?(e.bufPtr&&e.ownership&&(Module._free(e.bufPtr),h-=e.bufPtrSize),delete Module.docs[c]):a.utils.warn("Trying to delete document "+c+" that does not exist.");Module.docs[c]=b};a.DeleteDoc=function(c){var b=Module.docs[c];b?(b.ptr&&(b.ptr in downloadDataMap&&
(clearTimeout(downloadDataMap[b.ptr].timeout),downloadDataMap[b.ptr].destroyUserData(),delete downloadDataMap[b.ptr]),Module.PDFDocDestroy(b.ptr)),b.bufPtr&&b.ownership&&(Module._free(b.bufPtr),h-=b.bufPtrSize),delete Module.docs[c]):a.utils.warn("Trying to delete document "+c+" that does not exist.")};a.CreateDoc=function(p,b){if("id"===p.type)return Module.docPtrStringToIdMap[p.value];if(!b){do b=(++c).toString();while(b in Module.docs)}Module.hasBufOwnership=!0;a.CreateDocBackend(p,b);return b};
a.CreateEmptyDoc=function(){var a=(++c).toString(),b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocCreate(b));b=Module.getValue(b,"i8*");Module.docs[a]={ptr:b};return a};a.PDFDocCreateFromLayoutEls=function(a){var b=new Uint8Array(a);a=Module._malloc(b.length);var e=Module.stackSave(),c=Module.allocate(4,"i8",Module.ALLOC_STACK);Module.HEAPU8.set(b,a);b=Module._TRN_PDFDocCreateFromLayoutEls(a,b.length,c);c=Module.getValue(c,"i8*");Module._free(a);Module.stackRestore(e);REX(b);return c};
a.GetPageCount=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetPageCount(a,b));return Module.getValue(b,"i8*")};a.GetPage=function(a,b){var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetPage(a,b,e));e=Module.getValue(e,"i8*");Module.PageIsValid(e)||THROW("Trying to access page that doesn't exist at index "+b);return e};a.PageGetPageWidth=function(a){var b=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetPageWidth(a,1,b));
return Module.getValue(b,"double")};a.PageGetPageHeight=function(a){var b=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetPageHeight(a,1,b));return Module.getValue(b,"double")};a.PageGetDefaultMatrix=function(a,b){var e=Module.allocate(48,"i8",Module.ALLOC_STACK);b||(b=0);REX(Module._TRN_PageGetDefaultMatrix(a,!0,1,b,e));return e};a.GetMatrixAsArray=function(a){for(var b=[],e=0;6>e;++e)b[e]=Module.getValue(a+8*e,"double");return b};a.PageGetPageInfo=function(a){var b=Module.allocate(48,
"i8",Module.ALLOC_STACK),e=Module.allocate(8,"i8",Module.ALLOC_STACK),c=Module.allocate(8,"i8",Module.ALLOC_STACK),d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetPageInfo(a,!0,1,0,e,c,b,d));return{rotation:Module.getValue(d,"i8*"),width:Module.getValue(e,"double"),height:Module.getValue(c,"double"),matrix:Module.GetMatrixAsArray(b)}};a.GetUStringFromJSString=function(a,b){var e=Module.allocate(4,"i8",Module.ALLOC_STACK),c=2*(a.length+1),d=Module.allocate(c,"i8",b?Module.ALLOC_NORMAL:
Module.ALLOC_STACK);Module.stringToUTF16(a,d,c);c=Module._TRN_UStringCreateFromString(d,e);b&&Module._free(d);REX(c);return Module.getValue(e,"i8*")};a.GetJSStringFromUString=function(a){var b=Module.allocate(4,"i16*",Module.ALLOC_STACK);REX(Module._TRN_UStringCStr(a,b));return Module.UTF16ToString(Module.getValue(b,"i16*"))};a.GetJSStringFromCString=function(a){return Module.Pointer_stringify(a)};a.PDFNetSetResourceData=function(a){Module.res_ptr=Module._malloc(a.length);Module.HEAPU8.set(a,Module.res_ptr);
REX(Module._TRN_PDFNetSetResourceData(Module.res_ptr,a.length));Module.res_ptr_size=a.length};a.PDFDocDestroy=function(a){REX(Module._TRN_PDFDocDestroy(a))};a.VectorGetSize=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_VectorGetSize(a,b));return Module.getValue(b,"i32")};a.VectorGetAt=function(a,b){var e=Module.allocate(1,"i8*",Module.ALLOC_STACK);REX(Module._TRN_VectorGetAt(a,b,e));return Module.getValue(e,"i8*")};a.VectorDestroy=function(a){REX(Module._TRN_VectorDestroy(a))};
a.PDFRasterizerCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFRasterizerCreate(0,a));return Module.getValue(a,"i8*")};a.ExtractSeparationData=function(a){var b=Module.getValue(a,"i8*"),e=Module.getValue(a+4,"i32"),c=Module.getValue(a+8,"i8*"),d=Module.HEAPU8[a+12],f=Module.HEAPU8[a+13],g=Module.HEAPU8[a+14];a=Module.HEAPU8[a+15];var k=new Uint8Array(e);k.set(Module.HEAPU8.subarray(b,b+e));b=Module.GetJSStringFromUString(c);return{color:[d,f,g,a],data:k.buffer,
name:b}};a.PDFRasterizerRasterizeSeparations=function(a,b,e,c,d,f,g){var k=Module.allocate(8,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFRasterizerRasterizeSeparations(a,b,e,c,d,f,g,k));a=Module.VectorGetSize(k);b=Array(a);for(e=0;e<a;++e)c=Module.VectorGetAt(k,e),b[e]=Module.ExtractSeparationData(c);Module.VectorDestroy(k);return b};a.PageGetRotation=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetRotation(a,b));return Module.getValue(b,"i8*")};a.PageGetId=function(a){var b=
Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetSDFObj(a,b));b=Module.getValue(b,"i8*");a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjGetObjNum(b,a));a=Module.getValue(a,"i32");var e=Module.allocate(2,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjGetGenNum(b,e));e=Module.getValue(e,"i16");return a+"-"+e};a.PageSetRotation=function(a,b){REX(Module._TRN_PageSetRotation(a,b))};a.GetDefaultMatrixBox=function(a,b,e){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetRotation(a,
c));a=(Module.getValue(c,"i32")+e)%4;e=Module.allocate(48,"i8",Module.ALLOC_STACK);switch(a){case 0:return REX(Module._TRN_Matrix2DSet(e,1,0,0,-1,-b.x1,b.y2)),e;case 1:return REX(Module._TRN_Matrix2DSet(e,0,1,1,0,-b.y1,-b.x1)),e;case 2:return REX(Module._TRN_Matrix2DSet(e,-1,0,0,1,b.x2,-b.y1)),e;case 3:return REX(Module._TRN_Matrix2DSet(e,0,-1,-1,0,b.y2,b.x2)),e}throw Error("Yikes, we don't support that rotation type");};a.Matrix2DMultBBox=function(a,b){var e=Module.allocate(8,"i8",Module.ALLOC_STACK),
c=Module.allocate(8,"i8",Module.ALLOC_STACK);Module.setValue(e,b.x1,"double");Module.setValue(c,b.y1,"double");REX(Module._TRN_Matrix2DMult(a,e,c));b.x1=Module.getValue(e,"double");b.y1=Module.getValue(c,"double");Module.setValue(e,b.x2,"double");Module.setValue(c,b.y2,"double");REX(Module._TRN_Matrix2DMult(a,e,c));b.x2=Module.getValue(e,"double");b.y2=Module.getValue(c,"double");return b};a.Matrix2DMult=function(a,b){var e=Module.allocate(8,"i8",Module.ALLOC_STACK),c=Module.allocate(8,"i8",Module.ALLOC_STACK);
Module.setValue(e,b.x,"double");Module.setValue(c,b.y,"double");REX(Module._TRN_Matrix2DMult(a,e,c));b.x=Module.getValue(e,"double");b.y=Module.getValue(c,"double");return b};a.Matrix2DConcat=function(a,b){var e=Module.getValue(b,"double"),c=Module.getValue(b+8,"double"),d=Module.getValue(b+16,"double"),f=Module.getValue(b+24,"double"),g=Module.getValue(b+32,"double"),k=Module.getValue(b+40,"double");REX(Module._TRN_Matrix2DConcat(a,e,c,d,f,g,k))};a.Matrix2DSet=function(a,b,e,c,d,f,g){REX(Module._TRN_Matrix2DSet(a,
b,e,c,d,f,g))};a.IteratorHasNext=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_IteratorHasNext(a,b));return 0!==Module.getValue(b,"i8")};a.IteratorCurrent=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_IteratorCurrent(a,b));return Module.getValue(Module.getValue(b,"i8*"),"i8*")};a.IteratorNext=function(a){REX(Module._TRN_IteratorNext(a))};a.PageGetNumAnnots=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetNumAnnots(a,
b));return Module.getValue(b,"i32")};a.PageGetAnnot=function(a,b){var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetAnnot(a,b,e));return Module.getValue(e,"i8*")};a.PageAnnotRemove=function(a,b){REX(Module._TRN_PageAnnotRemoveByIndex(a,b))};a.AnnotGetType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_AnnotGetType(a,b));return Module.getValue(b,"i32")};a.AnnotHasAppearance=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_AnnotGetAppearance(a,
0,0,b));return 0!==Module.getValue(b,"i8*")};a.AnnotRefreshAppearance=function(a){REX(Module._TRN_AnnotRefreshAppearance(a))};a.ObjErase=function(a,b){var e=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjEraseFromKey(a,e))};a.GetJSDoubleArrFromCore=function(a,b){for(var e=Array(b),c=a,d=0;d<b;++d)e[d]=Module.getValue(c,"double"),c+=8;return e};a.GetJSIntArrayFromCore=function(a,b){for(var e=Array(b),c=a,d=0;d<b;++d)e[d]=Module.getValue(c,"i32"),c+=4;return e};
a.BookmarkIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_BookmarkIsValid(a,b));return 0!==Module.getValue(b,"i8")};a.BookmarkGetNext=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_BookmarkGetNext(a,b));return Module.getValue(b,"i8*")};a.BookmarkGetFirstChild=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_BookmarkGetFirstChild(a,b));return Module.getValue(b,"i8*")};a.BookmarkHasChildren=function(a){var b=
Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_BookmarkHasChildren(a,b));return 0!==Module.getValue(b,"i8")};a.BookmarkGetAction=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_BookmarkGetAction(a,b));return Module.getValue(b,"i8*")};a.BookmarkGetTitle=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_BookmarkGetTitle(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};a.ActionIsValid=function(a){var b=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module._TRN_ActionIsValid(a,b));return 0!==Module.getValue(b,"i8")};a.ActionGetType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ActionGetType(a,b));return Module.getValue(b,"i32")};a.ActionGetDest=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ActionGetDest(a,b));return Module.getValue(b,"i8*")};a.DestinationIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DestinationIsValid(a,
b));return 0!==Module.getValue(b,"i8")};a.DestinationGetPage=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DestinationGetPage(a,b));return Module.getValue(b,"i8*")};a.PageIsValid=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageIsValid(a,b));return 0!==Module.getValue(b,"i8")};a.PageGetIndex=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageGetIndex(a,b));return Module.getValue(b,"i32")};a.ObjGetAsPDFText=
function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjGetAsPDFText(a,b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};a.ObjFindObj=function(a,b){var e=Module.allocate(4,"i8",Module.ALLOC_STACK),c=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjFindObj(a,c,e));return Module.getValue(e,"i8*")};a.PDFDocGetFirstBookmark=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetFirstBookmark(a,
b));return Module.getValue(b,"i8*")};a.DestinationGetExplicitDestObj=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DestinationGetExplicitDestObj(a,b));return Module.getValue(b,"i8*")};a.DestinationGetFitType=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_DestinationGetFitType(a,b));return Module.getValue(b,"i32")};a.ObjIsNumber=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjIsNumber(a,b));return 0!==Module.getValue(b,
"i8")};a.ObjGetNumber=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjGetNumber(a,b));return Module.getValue(b,"double")};a.PDFDocGetRoot=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetRoot(a,b));return Module.getValue(b,"i8*")};a.ObjPutName=function(a,b,e){b=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);e=Module.allocate(Module.intArrayFromString(e),"i8",Module.ALLOC_STACK);var c=Module.allocate(4,"i8",
Module.ALLOC_STACK);REX(Module._TRN_ObjPutName(a,b,e,c));return Module.getValue(c,"i8*")};a.ObjPutDict=function(a,b){var e=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK),c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjPutDict(a,e,c));return Module.getValue(c,"i8*")};a.ObjPutString=function(a,b,e){b=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);e=Module.allocate(Module.intArrayFromString(e),"i8",Module.ALLOC_STACK);var c=Module.allocate(4,
"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjPutString(a,b,e,c));return Module.getValue(c,"i8*")};a.ObjPut=function(a,b,e){b=Module.allocate(Module.intArrayFromString(b),"i8",Module.ALLOC_STACK);var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjPut(a,b,e,c));return Module.getValue(c,"i8*")};a.ObjGetAt=function(a,b){var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ObjGetAt(a,b,e));return Module.getValue(e,"i8*")};a.Matrix2DInverse=function(a){var b=Module.allocate(48,
"i8",Module.ALLOC_STACK);REX(Module._TRN_Matrix2DInverse(a,b));return b};a.PDFDocInitSecurityHandler=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocInitSecurityHandler(a,0,b));return 0!==Module.getValue(b,"i8")};a.PDFDocInitStdSecurityHandler=function(a,b){var e=Module.allocate(4,"i8",Module.ALLOC_STACK),c=Module.intArrayFromString(b),d=Module.allocate(c,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocInitStdSecurityHandler(a,d,c.length-1,e));return 0!==Module.getValue(e,
"i8")};a.PDFDocFDFExtract=function(a,b){var e=Module.allocate(4,"i8",Module.ALLOC_STACK);b?REX(Module._TRN_PDFDocFDFExtractPageSet(a,b,2,e)):REX(Module._TRN_PDFDocFDFExtract(a,2,e));return Module.getValue(e,"i8*")};a.PDFDocInsertPages=function(a,b,e,c,d){REX(Module._TRN_PDFDocInsertPageSet(a,b,e,c,d?1:0,0))};a.PDFDocMovePages=function(a,b,e){REX(Module._TRN_PDFDocMovePageSet(a,b,a,e,0,0))};a.PDFDocGetPageIterator=function(a,b){var e=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetPageIterator(a,
b,e));return Module.getValue(e,"i8*")};a.PDFDocPageRemove=function(a,b){REX(Module._TRN_PDFDocPageRemove(a,b))};a.PDFDocPageCreate=function(a,b,e){var c=Module.allocate(40,"i8",Module.ALLOC_STACK);Module.setValue(c,0,"double");Module.setValue(c+8,0,"double");Module.setValue(c+16,b,"double");Module.setValue(c+24,e,"double");Module.setValue(c+32,0,"double");b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocPageCreate(a,c,b));return Module.getValue(b,"i8*")};a.PDFDocPageInsert=function(a,
b,c){REX(Module._TRN_PDFDocPageInsert(a,b,c))};a.PageSetCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageSetCreate(a));return Module.getValue(a,"i8*")};a.PageSetCreateRange=function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PageSetCreateRange(c,a,b));return Module.getValue(c,"i8*")};a.PageSetAddPage=function(a,b){REX(Module._TRN_PageSetAddPage(a,b))};a.FDFDocSaveAsXFDF=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_FDFDocSaveAsXFDFAsString(a,
b));a=Module.getValue(b,"i8*");return Module.GetJSStringFromUString(a)};a.ElementBuilderCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ElementBuilderCreate(a));return Module.getValue(a,"i8*")};a.ElementBuilderDestroy=function(a){REX(Module._TRN_ElementBuilderDestroy(a))};a.ElementBuilderCreateImage=function(a,b,c,d,f,g){var k=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ElementBuilderCreateImageScaled(a,b,c,d,f,g,k));return Module.getValue(k,"i8*")};
a.ElementWriterCreate=function(){var a=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ElementWriterCreate(a));return Module.getValue(a,"i8*")};a.ElementWriterDestroy=function(a){REX(Module._TRN_ElementWriterDestroy(a))};a.ElementWriterBegin=function(a,b){REX(Module._TRN_ElementWriterBeginOnPage(a,b,1))};a.ElementWriterWritePlacedElement=function(a,b){REX(Module._TRN_ElementWriterWritePlacedElement(a,b))};a.ElementWriterEnd=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ElementWriterEnd(a,
b))};a.ImageGetImageWidth=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ImageGetImageWidth(a,b));return Module.getValue(b,"i32")};a.ImageGetImageHeight=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ImageGetImageHeight(a,b));return Module.getValue(b,"i32")};a.ImageCreateFromMemory2=function(a,b,c){var d=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ImageCreateFromMemory2(a,b,c,0,d));return Module.getValue(d,"i8*")};a.ImageCreateFromFile=
function(a,b){var c=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_ImageCreateFromFile(a,b,0,c));return Module.getValue(c,"i8*")};a.PDFDocPagePushBack=function(a,b){REX(Module._TRN_PDFDocPagePushBack(a,b))};a.PDFDocHasOC=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocHasOC(a,b));return 0!==Module.getValue(b,"i8")};a.PDFDocGetOCGConfig=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_PDFDocGetOCGConfig(a,b));return Module.getValue(b,
"i8*")};a.OCGContextCreate=function(a){var b=Module.allocate(4,"i8",Module.ALLOC_STACK);REX(Module._TRN_OCGContextCreateFromConfig(a,b));return Module.getValue(b,"i8*")};a.UStringDestroy=function(a){REX(Module._TRN_UStringDestroy(a))};a.FDFDocDestroy=function(a){REX(Module._TRN_FDFDocDestroy(a))}})(global.Module);!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var h;"undefined"!=typeof window?h=window:"undefined"!=typeof global?h=global:"undefined"!=typeof self&&(h=self);h.PriorityQueue=a()}}(function(){return function h(c,d,f){function k(l,q){if(!d[l]){if(!c[l]){var n="function"==typeof require&&require;if(!q&&n)return n(l,!0);if(g)return g(l,!0);n=Error("Cannot find module '"+l+"'");throw n.code="MODULE_NOT_FOUND",
n;}n=d[l]={exports:{}};c[l][0].call(n.exports,function(d){var f=c[l][1][d];return k(f?f:d)},n,n.exports,h,c,d,f)}return d[l].exports}for(var g="function"==typeof require&&require,q=0;q<f.length;q++)k(f[q]);return k}({1:[function(h,c,d){var f={}.hasOwnProperty,k=function(c,d){function k(){this.constructor=c}for(var h in d)f.call(d,h)&&(c[h]=d[h]);k.prototype=d.prototype;c.prototype=new k;c.__super__=d.prototype;return c};d=h("./PriorityQueue/AbstractPriorityQueue");h=h("./PriorityQueue/ArrayStrategy");
d=function(c){function d(c){c||(c={});c.strategy||(c.strategy=BinaryHeapStrategy);c.comparator||(c.comparator=function(c,d){return(c||0)-(d||0)});d.__super__.constructor.call(this,c)}k(d,c);return d}(d);d.ArrayStrategy=h;c.exports=d},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3}],2:[function(h,c,d){c.exports=function(){function c(d){if(null==(null!=d?d.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=d?d.comparator:void 0))throw"Must pass options.comparator, a comparator";
this.priv=new d.strategy(d);this.length=0}c.prototype.queue=function(c){this.length++;this.priv.queue(c)};c.prototype.dequeue=function(c){if(!this.length)throw"Empty queue";this.length--;return this.priv.dequeue()};c.prototype.peek=function(c){if(!this.length)throw"Empty queue";return this.priv.peek()};c.prototype.remove=function(c){this.priv.remove(c)&&--this.length};c.prototype.find=function(c){return 0<=this.priv.find(c)};c.prototype.removeAllMatching=function(c,d){var f=this.priv.removeAllMatching(c,
d);this.length-=f};return c}()},{}],3:[function(h,c,d){var f;f=function(c,d,f){var h,v,n;v=0;for(h=c.length;v<h;)n=v+h>>>1,0<=f(c[n],d)?v=n+1:h=n;return v};c.exports=function(){function c(d){var f;this.options=d;this.comparator=this.options.comparator;this.data=(null!=(f=this.options.initialValues)?f.slice(0):void 0)||[];this.data.sort(this.comparator).reverse()}c.prototype.queue=function(c){var d;d=f(this.data,c,this.comparator);this.data.splice(d,0,c)};c.prototype.dequeue=function(){return this.data.pop()};
c.prototype.peek=function(){return this.data[this.data.length-1]};c.prototype.find=function(c){var d=f(this.data,c,this.comparator)-1;return 0<=d&&!this.comparator(this.data[d],c)?d:-1};c.prototype.remove=function(c){c=this.find(c);return 0<=c?(this.data.splice(c,1),!0):!1};c.prototype.removeAllMatching=function(c,d){for(var f=0,k=this.data.length-1;0<=k;--k)if(c(this.data[k])){var h=this.data.splice(k,1)[0];d&&d(h);++f}return f};return c}()},{}]},{},[1])(1)});(function(a){a.SetupPDFNetFunctions=function(h){Module._IB_=[];for(var c=function(a){if("object"===typeof a&&null!==a)if("undefined"!==typeof a.byteLength){var d=Module._IB_.length;Module._IB_[d]=new Uint8Array(a);a={handle:d,isArrayBufferRef:!0}}else for(prop in a)a.hasOwnProperty(prop)&&(a[prop]=c(a[prop]));return a},d=function(a){if("object"===typeof a&&null!==a)if(a.buffer)a=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);else if(a.isArrayBufferRef)a=Module._IB_[a.handle].buffer;else for(prop in a)a.hasOwnProperty(prop)&&
(a[prop]=d(a[prop]));return a},f=Module._TRN_EMSCreateSharedWorkerInstance(),k,g=Module._TRN_EMSWorkerInstanceGetFunctionIterator(f),q=function(a,g){return new Promise(function(k,h){a=c(a);var b=a.docId,b=b?Module.GetDoc(b):0;(b=Module.EMSCallSharedFunction(f,g,b))?h({type:"InvalidPDF",message:Module.GetErrToString(b)}):(b=Module.EMSGetLastResponse(f),b=d(b),k(b));Module._IB_=[]})};k=Module._TRN_EMSFunctionIteratorGetNextCommandName(g);)k=Module.GetJSStringFromCString(k),a.queue.onAsync(k,q);Module._TRN_EMSFunctionIteratorDestroy(g);
if(Module._TRN_EMSCreatePDFNetWorkerInstance){var l={},g=function(a,c){h.on(a,c);l[a]=!0};Module.docPtrStringToIdMap={};var v=function(a){if(a in Module.docPtrStringToIdMap)return Module.docPtrStringToIdMap[a];throw Error("Couldn't find document "+a);};a.queue.onAsync("PDFDoc.RequirePage",function(a,c){return Module.RequirePage(v(a.docId),a.pageNum)});g("pdfDocCreateFromBuffer",function(a){a=Module.CreateDoc({type:"array",value:a.buf});var c=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[c]=
a;return c});g("PDFDoc.destroy",function(a){a=v(a.auto_dealloc_obj);Module.DeleteDoc(a)});g("PDFDoc.saveMemoryBuffer",function(a){var c=v(a.doc);return Module.SaveHelper(Module.GetDoc(c),c,a.flags).slice(0)});g("pdfDocCreate",function(a){a=Module.CreateDoc({type:"new"});var c=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[c]=a;return c});g("GetPDFDoc",function(a){a=a.docId;var c=Module.GetDoc(a).toString(16);Module.docPtrStringToIdMap[c]=a;return c});g("ExtractPDFNetLayersContext",function(a){var c=
a.layers;a=Module.GetDoc(a.docId);var d=0;c?d=Module.EMSCreateUpdatedLayersContext(a,c):Module.PDFDocHasOC(a)&&(c=Module.PDFDocGetOCGConfig(a),d=Module.OCGContextCreate(c));return d.toString(16)});for(var n=Module._TRN_EMSCreatePDFNetWorkerInstance(),g=Module._TRN_EMSWorkerInstanceGetFunctionIterator(n),q=function(a){return new Promise(function(f,g){a=c(a);var k=Module.EMSCallPDFNetFunction(n,a);k?g(Module.GetErrToString(k)):(k=Module.EMSGetLastResponse(n),k=d(k),f(k))})};k=Module._TRN_EMSFunctionIteratorGetNextCommandName(g);)if(k=
Module.GetJSStringFromCString(k),!l[k])h.onAsync(k,q);Module._TRN_EMSFunctionIteratorDestroy(g)}}})("undefined"===typeof self?this:self);(function(a){function h(a){return new Promise(function(c,k){var g=indexedDB.open("wasm-cache",a);g.onerror=k.bind(null,"Error opening wasm cache database");g.onsuccess=function(){c(g.result)};g.onupgradeneeded=function(a){var c=g.result;c.objectStoreNames.contains("wasm-cache")&&(console.log("Clearing out version "+a.oldVersion+" wasm cache"),c.deleteObjectStore("wasm-cache"));console.log("Creating version "+a.newVersion+" wasm cache");c.createObjectStore("wasm-cache")}})}function c(a,c){return new Promise(function(k,
g){var h=a.transaction(["wasm-cache"]).objectStore("wasm-cache").get(c);h.onsuccess=function(a){h.result?k(h.result):g("Module "+c+" was not found in wasm cache")};h.onerror=g.bind(null,"Error getting wasm module "+c)})}a.isWasmCached=function(a,f){return h(a).then(function(a){return c(a,f).then(function(){return!0})})["catch"](function(){return!1})};a.instantiateCachedURL=function(d,f,k,g){function q(a,c){var d=a.transaction(["wasm-cache"],"readwrite").objectStore("wasm-cache").put(c,f);d.onerror=
function(a){console.log("Failed to store in wasm cache: "+a)};d.onsuccess=function(a){console.log("Successfully stored "+f+" in wasm cache")}}function l(c){v=v||Date.now();return c?WebAssembly.instantiateStreaming(fetch(a.getBrotliUrl(f)),k)["catch"](function(a){return l(!1)}):a.loadURLWithBrotliPriority(f,g,!0,!0).then(function(a){Date.now();return WebAssembly.instantiate(a,k)})}var v;return h(d).then(function(a){return c(a,f).then(function(a){return WebAssembly.instantiate(a,k)},function(c){return l(!!WebAssembly.instantiateStreaming).then(function(c){try{q(a,
c.module)}catch(d){}return c.instance})})},function(a){console.log(a);return l().then(function(a){return a.instance})})}})(this);(function(a){function h(a,b){return fetch(a).then(function(a){console.log("Pos 1");if(200!==a.status)throw Error("Response failed with code "+a.status);console.log("Pos 2");console.log(a);console.log("Pos 2a");var c=!1,e=new ReadableStream({start:function(e){function d(){if(!c)return console.log("Pos 4"),g.read().then(function(a){c=a.done;a=a.value;c?(console.log("Done"),(a=b.End())?e.enqueue(a):e.close()):(a=b.GetNextChunk(a),console.log("Enqueue"),a&&e.enqueue(a))}).then(d)}console.log("Pos 3");
var f=a.body;console.log("Pos 3z"+f);var g=f.getReader();d()}});console.log("Pos 2b");return new Response(e,{headers:{"content-type":"application/wasm"}})})}var c=function(a){if("string"===typeof a){for(var b=new Uint8Array(a.length),c=a.length,e=0;e<c;e++)b[e]=a.charCodeAt(e);return b}return a},d=function(a){if("string"!==typeof a){for(var b="",c=0,e=a.length,d;c<e;)d=a.subarray(c,c+1024),c+=1024,b+=String.fromCharCode.apply(null,d);return b}return a},f=!1,k=function(b,e){f||(importScripts(a.basePath+
"external/decode.min.js"),f=!0);var g=self.BrotliDecode(c(b));return e?g:d(g)},g=function(){this.remainingDataArrays=[]};g.prototype={processRaw:function(a){return a},processBrotli:function(a){this.remainingDataArrays.push(a);return null},GetNextChunk:function(a){this.decodeFunction||(this.decodeFunction=0===a[0]&&97===a[1]&&115===a[2]&&109===a[3]?this.processRaw:this.processBrotli);return this.decodeFunction(a)},End:function(){if(this.remainingDataArrays.length){for(var a=this.arrays,b=0,c=0;c<a.length;++c)b+=
a[c].length;for(var b=new Uint8Array(b),e=0,c=0;c<a.length;++c){var d=a[c];b.set(d,e);e+=d.length}return k(b,!0)}return null}};var q=!1,l=function(b,e){q||(importScripts(a.basePath+"external/rawinflate.js",a.basePath+"external/pako_inflate.min.js"),q=!0);var f=10;if("string"===typeof b){if(b.charCodeAt(3)&8){for(;0!==b.charCodeAt(f);++f);++f}}else if(b[3]&8){for(;0!==b[f];++f);++f}if(e)return b=c(b),b=b.subarray(f,b.length-8),a.pako.inflate(b,{windowBits:-15});b=d(b);b=b.substring(f,b.length-8);return a.RawDeflate.inflate(b)},
v=function(a,b){return b?a:d(a)},n=function(a){var b=!a.shouldOutputArray,c=new XMLHttpRequest;c.open("GET",a.url,a.isAsync);var e=b&&c.overrideMimeType;c.responseType=e?"text":"arraybuffer";e&&c.overrideMimeType("text/plain; charset=x-user-defined");c.send();var f=function(){Date.now();var f;f=e?c.responseText:new Uint8Array(c.response);f.length<a.compressedMaximum?(f=a.decompressFunction(f,a.shouldOutputArray),console.warn("Your server has not been configured to serve .gz and .br files with the expected Content-Encoding. See http://www.pdftron.com/kb_content_encoding for instructions on how to resolve this.")):
b&&(f=d(f));return f},g;if(a.isAsync)g=new Promise(function(b,e){c.onload=function(){200===this.status?b(f()):e("Download Failed "+a.url)};c.onerror=function(){e("Network error occurred "+a.url)}});else{if(200===c.status)return f();throw Error("Failed to load "+a.url);}return g},t=function(a){return a.replace(".",".br.")},m=function(a,b){b.url=a.replace(".",".gz.");b.decompressFunction=l;return n(b)},r=function(a,b){b.url=t(a);b.decompressFunction=k;return n(b)},p=function(a,b){b.url=a;b.decompressFunction=
v;return n(b)},b=function(a,b,c,e){return a["catch"](function(a){console.warn(a);return e(b,c)})},e=function(a,c,e){var d;if(e.isAsync){var f=c[0](a,e);for(d=1;d<c.length;++d)f=b(f,a,e,c[d]);return f}for(d=0;d<c.length;++d)try{return c[d](a,e)}catch(g){console.warn(g.message)}};a.getBrotliUrl=t;a.loadURLWithBrotliPriority=function(a,b,c,d){var f={};f.compressedMaximum=b;f.isAsync=c;f.shouldOutputArray=d;return e(a,[r,m,p],f)};a.loadURLWithGzipPriority=function(a,b,c,d){var f={};f.compressedMaximum=
b;f.isAsync=c;f.shouldOutputArray=d;return e(a,[m,r,p],f)};a.loadWasmBrotliStream=function(a){return h(a,new g)}})("undefined"===typeof window?this:window);(function(a){a.Uint8ClampedArray||(a.Uint8ClampedArray=a.Uint8Array);var h=!(!self.WebAssembly||!self.WebAssembly.validate),c=/^((?!chrome|android).)*safari/i.test(a.navigator.userAgent),d=-1<a.navigator.userAgent.indexOf("Edge"),f=function(a){var c=this;this.promise=a.then(function(a){c.response=a;c.status=200})};f.prototype={addEventListener:function(a,c){this.promise.then(c)}};a.loadCompiledBackend=function(k,g,q){if(!h||q||d||c){q=loadURLWithGzipPriority((Module.asmjsPrefix?Module.asmjsPrefix:
"")+k+".js",g[".js"],!1);var l=loadURLWithGzipPriority((Module.memoryInitializerPrefixURL?Module.memoryInitializerPrefixURL:"")+k+".js.mem",g[".js.mem"],!0,!0);Module.memoryInitializerRequest=new f(l)}else Module.instantiateWasm=function(c,d){return self.instantiateCachedURL(a.getWasmVersion(k),k+"Wasm.wasm",c,g["Wasm.wasm"]).then(function(a){d(a)})},q=loadURLWithBrotliPriority(k+"Wasm.js",g["Wasm.js"],!1,!1);eval.call(self,q)}})("undefined"===typeof window?this:window);(function(a){a.basePath="../";var h=function(){a.loadCompiledBackend("PDFNetC",{"Wasm.wasm":4E6,"Wasm.js":1E5,".js":6E6,".js.mem":3E5})};self.shouldResize||h();a.EmscriptenPDFManager=function(){};a.EmscriptenPDFManager.prototype={OnInitialized:function(c){Module.loaded?c():(Module.initCb=function(){c()},a.utils.log("worker","PDFNet is not initialized yet!"))},NewDoc:function(a,d){return new Promise(function(f,k){try{f(Module.loadDoc(a,d))}catch(g){k(g)}})},LoadAnnotations:function(a,d){var f;d?(f=
Module.PageArrayToPageSet(d),f=Module.PDFDocExportXFDF(a,f)):f=Module.PDFDocExportXFDF(a);return f},Initialize:function(c,d,f,k){c&&(Module.TOTAL_MEMORY=c);Module.memoryInitializerPrefixURL=d;Module.asmjsPrefix=f;a.basePath=k;h()},shouldRunRender:function(a){return Module.ShouldRunRender(a.docId,a.pageIndex+1)}};(function(c){function d(b){var c=b.data,d=b.action,f;f="GetCanvas"===d||"GetCanvasPartial"===d?h.shouldRunRender(c):!0;if(f){m=b;var k=b.asyncCallCapability;a.utils.log("Memory","Worker running command: "+
d);l.actionMap[d](c,b).then(function(a){k.resolve(a)},function(a){k.reject(a)})}else a.deferredQueue.queue(b),g()}function f(a){a.asyncCallCapability=createPromiseCapability();m?l.queue(a):d(a);return a.asyncCallCapability.promise}function k(b){self.shouldResize&&h.Initialize(b.options.workerHeapSize,b.options.pdfResourcePath,b.options.pdfAsmPath,b.options.parentUrl);Module.chunkMax=b.options.chunkMax;if(b.array instanceof Uint8Array){var d=255===b.array[0];c.postMessageTransfers=d;"response"in new XMLHttpRequest?
h.OnInitialized(function(){a.SetupPDFNetFunctions(c);t();c.send("test",{supportTypedArray:!0,supportTransfers:d})}):c.send("test",!1)}else c.send("test",!1)}function g(){setImmediate(function(){if(!m||"BeginOperation"!==m.action)if(l.length){if(!m||m.priority!==b){var a=l.dequeue();d(a)}}else m=null})}var h=new a.EmscriptenPDFManager,l,v=!1,n=!1;Module.workerMessageHandler=c;var t=function(){v?n||(c.send("workerLoaded",{}),n=!0):v=!0};h.OnInitialized(t);(function(){a.queue=l=new PriorityQueue({strategy:PriorityQueue.ArrayStrategy,
comparator:function(a,b){return a.priority===b.priority?a.callbackId-b.callbackId:b.priority-a.priority}});a.deferredQueue=new PriorityQueue({strategy:PriorityQueue.ArrayStrategy,comparator:function(a,b){return a.priority===b.priority?a.callbackId-b.callbackId:b.priority-a.priority}});l.actionMap={};l.onAsync=function(a,b){c.onAsync(a,f);l.actionMap[a]=b}})();var m=null;c.on("test",k);c.on("InitWorker",k);var r=function(a){m&&a(m)&&(Module.cancelCurrent(),m=null);l.removeAllMatching(a,function(a){a.asyncCallCapability.reject({type:"Cancelled",
message:"Operation was cancelled due to document deletion."})})},p=function(a){r(function(b){return b.data&&b.data.docId===a})};c.on("UpdatePassword",function(a){return Module.UpdatePassword(a.docId,a.password)});c.on("LoadRes",function(a){Module.loadResources(a.array,a.l);return{}});c.on("DownloaderHint",function(a){Module.DownloaderHint(a.docId,a.hint)});c.on("IsLinearized",function(a){return Module.IsLinearizationValid(a.docId)});c.onNextAsync(g);l.onAsync("NewDoc",function(a){return h.NewDoc(a)});
l.onAsync("GetCanvas",function(b){a.utils.log("workerdetails","Run GetCanvas PageIdx: "+b.pageIndex+" Width: "+b.width);a.utils.log("Memory","loadCanvas with potential memory usage "+b.width*b.height*8);return Module.loadCanvas(b.docId,b.pageIndex,b.width,b.height,b.rotation,null,b.layers,b.overprintMode)});l.onAsync("GetCanvasPartial",function(b){a.utils.log("Memory","GetCanvasPartial with potential memory usage "+b.width*b.height*8);return Module.loadCanvas(b.docId,b.pageIndex,b.width,b.height,
b.rotation,b.bbox,b.layers,b.overprintMode)});l.onAsync("LoadText",function(a){return Module.GetTextData(a.docId,a.pageIndex)});l.onAsync("SaveDoc",function(a){return Module.SaveDoc(a.docId,a.xfdfString,a.finishedWithDocument,a.printDocument,a.flags)});l.onAsync("SaveDocFromFixedElements",function(a){return Module.SaveDocFromFixedElements(a.bytes,a.xfdfString,a.flags)});l.onAsync("MergeXFDF",function(a){return Module.MergeXFDF(a.docId,a.xfdf)});l.onAsync("InsertPages",function(a){return Module.InsertPages(a.docId,
a.doc,a.pageArray,a.destPos,a.insertBookmarks)});l.onAsync("MovePages",function(a){return Module.MovePages(a.docId,a.pageArray,a.destPos)});l.onAsync("RemovePages",function(a){return Module.RemovePages(a.docId,a.pageArray)});l.onAsync("RotatePages",function(a){return Module.RotatePages(a.docId,a.pageArray,a.rotation)});l.onAsync("ExtractPages",function(a){return Module.ExtractPages(a.docId,a.pageArray,a.xfdfString)});l.onAsync("CropPages",function(a){return Module.CropPages(a.docId,a.pageArray,a.topMargin,
a.botMargin,a.leftMargin,a.rightMargin)});l.onAsync("InsertBlankPages",function(a){return Module.InsertBlankPages(a.docId,a.pageArray,a.width,a.height)});l.onAsync("BeginOperation",function(){return Promise.resolve()});l.onAsync("RequirePage",function(a,b){return Module.RequirePage(a.docId,a.pageNum)});var b=99999;c.on("FinishOperation",function(){if("BeginOperation"===m.action)c.onNextAsync(g),Module.cancelCurrent(),m=null;else throw{message:"Operation has not started."};});c.on("DeleteDocument",
function(a){a=a.docId;p(a);Module.DeleteDoc(a)});c.on("LoadBookmarks",function(a){return Module.LoadBookmarks(a.docId)});c.on("GetCanvasProgressive",function(b){var c;if(m&&m.callbackId===b.callbackId)c=Module.GetCurrentCanvasData(!0);else{if(l.find({priority:0,callbackId:b.callbackId}))throw{type:"Queued",message:"Rendering has not started yet."};if(a.deferredQueue.find({priority:0,callbackId:b.callbackId}))throw{type:"Queued",message:"Rendering has not started yet."};}if(!c)throw{type:"Unavailable",
message:"Rendering is complete or was cancelled."};return c});c.on("LoadAnnotations",function(a){return{xfdfString:h.LoadAnnotations(a.docId,a.pages)}});c.on("actionCancel",function(b){m&&m.callbackId===b.callbackId?(a.utils.log("workerdetails","Cancelled Current Operation"),Module.cancelCurrent()&&g()):(a.utils.log("workerdetails","Cancelled queued operation"),l.remove({priority:0,callbackId:b.callbackId}),a.deferredQueue.remove({priority:0,callbackId:b.callbackId}))})})(new MessageHandler("worker_processor",
self))})("undefined"===typeof window?this:window);
